{"ast":null,"code":"/***\r\n * curtains.js v6.1.1\r\n * https://www.curtainsjs.com/\r\n *\r\n * @author: Martin Laxenaire\r\n * https://www.martin-laxenaire.fr/\r\n */\n\"use strict\";\n\nfunction Curtains(t) {\n  var e;\n  (this.planes = [], this.renderTargets = [], this.shaderPasses = [], this._imageCache = [], this._drawStacks = {\n    opaque: {\n      length: 0,\n      programs: [],\n      order: []\n    },\n    transparent: {\n      length: 0,\n      programs: [],\n      order: []\n    },\n    renderPasses: [],\n    scenePasses: []\n  }, this._drawingEnabled = !0, this._forceRender = !1, \"string\" == typeof t) && (console.warn(\"Since v4.0 you should use an object to pass your container and other parameters. Please refer to the docs: https://www.curtainsjs.com/documentation.html\"), t = {\n    container: e = t\n  });\n  t.container ? \"string\" == typeof t.container ? this.container = document.getElementById(t.container) : t.container instanceof Element && (this.container = t.container) : ((e = document.createElement(\"div\")).setAttribute(\"id\", \"curtains-canvas\"), document.body.appendChild(e), this.container = e);\n  if (this._autoResize = t.autoResize, null !== this._autoResize && void 0 !== this._autoResize || (this._autoResize = !0), this._autoRender = t.autoRender, null !== this._autoRender && void 0 !== this._autoRender || (this._autoRender = !0), this._watchScroll = t.watchScroll, null !== this._watchScroll && void 0 !== this._watchScroll || (this._watchScroll = !0), this.pixelRatio = t.pixelRatio || window.devicePixelRatio || 1, t.renderingScale = isNaN(t.renderingScale) ? 1 : parseFloat(t.renderingScale), this._renderingScale = Math.max(.25, Math.min(1, t.renderingScale)), this.premultipliedAlpha = t.premultipliedAlpha || !1, this.alpha = t.alpha, null !== this.alpha && void 0 !== this.alpha || (this.alpha = !0), this.antialias = t.antialias, null !== this.antialias && void 0 !== this.antialias || (this.antialias = !0), this.productionMode = t.production || !1, !this.container) return this.productionMode || console.warn(\"You must specify a valid container ID\"), void (this._onErrorCallback && this._onErrorCallback());\n\n  this._init();\n}\n\nCurtains.prototype._init = function () {\n  this.glCanvas = document.createElement(\"canvas\");\n  var t = {\n    alpha: this.alpha,\n    premultipliedAlpha: this.premultipliedAlpha,\n    antialias: this.antialias\n  };\n  if (this.gl = this.glCanvas.getContext(\"webgl2\", t), this._isWebGL2 = !!this.gl, this.gl || (this.gl = this.glCanvas.getContext(\"webgl\", t) || this.glCanvas.getContext(\"experimental-webgl\", t)), !this.gl) return this.productionMode || console.warn(\"WebGL context could not be created\"), void (this._onErrorCallback && this._onErrorCallback());\n  this._getExtensions(), this._glState = {\n    currentProgramID: null,\n    programs: [],\n    currentBuffersID: 0,\n    setDepth: null,\n    frameBufferID: null,\n    scenePassIndex: null,\n    cullFace: null,\n    flipY: null\n  }, this._contextLostHandler = this._contextLost.bind(this), this.glCanvas.addEventListener(\"webglcontextlost\", this._contextLostHandler, !1), this._contextRestoredHandler = this._contextRestored.bind(this), this.glCanvas.addEventListener(\"webglcontextrestored\", this._contextRestoredHandler, !1), this._scrollManager = {\n    handler: this._scroll.bind(this, !0),\n    shouldWatch: this._watchScroll,\n    xOffset: window.pageXOffset,\n    yOffset: window.pageYOffset,\n    lastXDelta: 0,\n    lastYDelta: 0\n  }, this._watchScroll && window.addEventListener(\"scroll\", this._scrollManager.handler, {\n    passive: !0\n  }), this.setPixelRatio(this.pixelRatio, !1), this._resizeHandler = null, this._autoResize && (this._resizeHandler = this.resize.bind(this, !0), window.addEventListener(\"resize\", this._resizeHandler, !1)), this._readyToDraw();\n}, Curtains.prototype._getExtensions = function () {\n  this._extensions = [], this._isWebGL2 ? (this._extensions.EXT_color_buffer_float = this.gl.getExtension(\"EXT_color_buffer_float\"), this._extensions.OES_texture_float_linear = this.gl.getExtension(\"OES_texture_float_linear\"), this._extensions.WEBGL_lose_context = this.gl.getExtension(\"WEBGL_lose_context\")) : (this._extensions.OES_vertex_array_object = this.gl.getExtension(\"OES_vertex_array_object\"), this._extensions.OES_texture_float = this.gl.getExtension(\"OES_texture_float\"), this._extensions.OES_texture_float_linear = this.gl.getExtension(\"OES_texture_float_linear\"), this._extensions.OES_texture_half_float = this.gl.getExtension(\"OES_texture_half_float\"), this._extensions.OES_texture_half_float_linear = this.gl.getExtension(\"OES_texture_half_float_linear\"), this._extensions.OES_element_index_uint = this.gl.getExtension(\"OES_element_index_uint\"), this._extensions.OES_standard_derivatives = this.gl.getExtension(\"OES_standard_derivatives\"), this._extensions.EXT_sRGB = this.gl.getExtension(\"EXT_sRGB\"), this._extensions.WEBGL_depth_texture = this.gl.getExtension(\"WEBGL_depth_texture\"), this._extensions.WEBGL_draw_buffers = this.gl.getExtension(\"WEBGL_draw_buffers\"), this._extensions.WEBGL_lose_context = this.gl.getExtension(\"WEBGL_lose_context\"));\n}, Curtains.prototype.setPixelRatio = function (t, e) {\n  this.pixelRatio = parseFloat(Math.max(t, 1)) || 1, this.resize(e);\n}, Curtains.prototype._setSize = function () {\n  var t = this.container.getBoundingClientRect();\n  this._boundingRect = {\n    width: t.width * this.pixelRatio,\n    height: t.height * this.pixelRatio,\n    top: t.top * this.pixelRatio,\n    left: t.left * this.pixelRatio\n  };\n  var e = !!navigator.userAgent.match(/Version\\/[\\d\\.]+.*Safari/),\n      i = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n\n  if (e && i) {\n    this._boundingRect.top = function (t) {\n      for (var e = 0; t && !isNaN(t.offsetTop);) e += t.offsetTop - t.scrollTop, t = t.offsetParent;\n\n      return e;\n    }(this.container) * this.pixelRatio;\n  }\n\n  this.glCanvas.style.width = Math.floor(this._boundingRect.width / this.pixelRatio) + \"px\", this.glCanvas.style.height = Math.floor(this._boundingRect.height / this.pixelRatio) + \"px\", this.glCanvas.width = Math.floor(this._boundingRect.width * this._renderingScale), this.glCanvas.height = Math.floor(this._boundingRect.height * this._renderingScale), this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight), this._scrollManager.shouldWatch && (this._scrollManager.xOffset = window.pageXOffset, this._scrollManager.yOffset = window.pageYOffset);\n}, Curtains.prototype.getBoundingRect = function () {\n  return this._boundingRect;\n}, Curtains.prototype.resize = function (t) {\n  this._setSize();\n\n  for (var e = 0; e < this.planes.length; e++) this.planes[e]._canDraw && this.planes[e].planeResize();\n\n  for (e = 0; e < this.shaderPasses.length; e++) this.shaderPasses[e]._canDraw && this.shaderPasses[e].planeResize();\n\n  for (e = 0; e < this.renderTargets.length; e++) this.renderTargets[e].resize();\n\n  this.needRender();\n  var i = this;\n  setTimeout(function () {\n    i._onAfterResizeCallback && t && i._onAfterResizeCallback();\n  }, 0);\n}, Curtains.prototype._scroll = function () {\n  var t = {\n    x: window.pageXOffset,\n    y: window.pageYOffset\n  };\n\n  if (this.updateScrollValues(t.x, t.y), this._scrollManager.shouldWatch) {\n    for (var e = 0; e < this.planes.length; e++) this.planes[e].watchScroll && this.planes[e].updateScrollPosition();\n\n    this.needRender();\n  }\n\n  this._onScrollCallback && this._onScrollCallback();\n}, Curtains.prototype.updateScrollValues = function (t, e) {\n  var i = this._scrollManager.xOffset;\n  this._scrollManager.xOffset = t, this._scrollManager.lastXDelta = i - this._scrollManager.xOffset;\n  var s = this._scrollManager.yOffset;\n  this._scrollManager.yOffset = e, this._scrollManager.lastYDelta = s - this._scrollManager.yOffset;\n}, Curtains.prototype.getScrollDeltas = function () {\n  return {\n    x: this._scrollManager.lastXDelta,\n    y: this._scrollManager.lastYDelta\n  };\n}, Curtains.prototype.getScrollValues = function () {\n  return {\n    x: this._scrollManager.xOffset,\n    y: this._scrollManager.yOffset\n  };\n}, Curtains.prototype.enableDrawing = function () {\n  this._drawingEnabled = !0;\n}, Curtains.prototype.disableDrawing = function () {\n  this._drawingEnabled = !1;\n}, Curtains.prototype.needRender = function () {\n  this._forceRender = !0;\n}, Curtains.prototype._contextLost = function (t) {\n  t.preventDefault(), this._glState = {\n    currentProgramID: null,\n    programs: [],\n    currentBuffersID: 0,\n    setDepth: null,\n    frameBufferID: null,\n    scenePassIndex: null,\n    cullFace: null,\n    flipY: null\n  }, this._animationFrameID && window.cancelAnimationFrame(this._animationFrameID);\n  var e = this;\n  setTimeout(function () {\n    e._onContextLostCallback && e._onContextLostCallback();\n  }, 0);\n}, Curtains.prototype.restoreContext = function () {\n  this.gl && this._extensions.WEBGL_lose_context ? this._extensions.WEBGL_lose_context.restoreContext() : this.productionMode || (this.gl ? this._extensions.WEBGL_lose_context || console.warn(\"Could not restore context because the restore context extension is not defined\") : console.warn(\"Could not restore context because the context is not defined\"));\n}, Curtains.prototype._contextRestored = function () {\n  var t = this._drawingEnabled;\n  this._drawingEnabled = !1, this._getExtensions(), this._setBlendFunc(), this._setDepth(!0), this._drawStacks = {\n    opaque: {\n      length: 0,\n      programs: [],\n      order: []\n    },\n    transparent: {\n      length: 0,\n      programs: [],\n      order: []\n    },\n    renderPasses: [],\n    scenePasses: []\n  }, this._imageCache = [];\n\n  for (var e = 0; e < this.renderTargets.length; e++) this.renderTargets[e]._restoreContext();\n\n  for (e = 0; e < this.planes.length; e++) this.planes[e]._restoreContext();\n\n  for (e = 0; e < this.shaderPasses.length; e++) this.shaderPasses[e]._restoreContext();\n\n  this._onContextRestoredCallback && this._onContextRestoredCallback(), this._drawingEnabled = t, this.needRender(), this._autoRender && this._animate();\n}, Curtains.prototype.dispose = function () {\n  for (this._isDestroying = !0; this.planes.length > 0;) this.removePlane(this.planes[0]);\n\n  for (; this.shaderPasses.length > 0;) this.removeShaderPass(this.shaderPasses[0]);\n\n  for (; this.renderTargets.length > 0;) this.removeRenderTarget(this.renderTargets[0]);\n\n  for (var t = 0; t < this._glState.programs.length; t++) {\n    var e = this._glState.programs[t];\n    this.gl.deleteProgram(e.program);\n  }\n\n  this._glState = {\n    currentProgramID: null,\n    programs: [],\n    currentBuffersID: 0,\n    setDepth: null,\n    frameBufferID: null,\n    scenePassIndex: null,\n    cullFace: null,\n    flipY: null\n  };\n  var i = this,\n      s = setInterval(function () {\n    0 === i.planes.length && 0 === i.shaderPasses.length && 0 === i.renderTargets.length && (clearInterval(s), i._clear(), i._animationFrameID && window.cancelAnimationFrame(i._animationFrameID), this._resizeHandler && window.removeEventListener(\"resize\", i._resizeHandler, !1), this._watchScroll && window.removeEventListener(\"scroll\", this._scrollManager.handler, {\n      passive: !0\n    }), i.glCanvas.removeEventListener(\"webgllost\", i._contextLostHandler, !1), i.glCanvas.removeEventListener(\"webglrestored\", i._contextRestoredHandler, !1), i.gl && i._extensions.WEBGL_lose_context && i._extensions.WEBGL_lose_context.loseContext(), i.glCanvas.width = i.glCanvas.width, i.gl = null, i.container.removeChild(i.glCanvas), i.container = null, i.glCanvas = null);\n  }, 100);\n}, Curtains.prototype._createShader = function (t, e) {\n  var i = this.gl.createShader(e);\n\n  if (this.gl.shaderSource(i, t), this.gl.compileShader(i), !this.productionMode && !this.gl.getShaderParameter(i, this.gl.COMPILE_STATUS)) {\n    for (var s = e === this.gl.VERTEX_SHADER ? \"vertex shader\" : \"fragment shader\", r = this.gl.getShaderSource(i).split(\"\\n\"), a = 0; a < r.length; a++) r[a] = a + 1 + \": \" + r[a];\n\n    return r = r.join(\"\\n\"), console.warn(\"Errors occurred while compiling the\", s, \":\\n\", this.gl.getShaderInfoLog(i)), console.error(r), null;\n  }\n\n  return i;\n}, Curtains.prototype._isEqualShader = function (t, e) {\n  var i = !1;\n  return 0 === t.localeCompare(e) && (i = !0), i;\n}, Curtains.prototype._setupProgram = function (t, e, i) {\n  for (var s = {}, r = 0; r < this._glState.programs.length; r++) if (this._isEqualShader(this._glState.programs[r].vsCode, t) && this._isEqualShader(this._glState.programs[r].fsCode, e)) {\n    s = this._glState.programs[r];\n    break;\n  }\n\n  if (s.program) {\n    if (i.shareProgram) return s;\n\n    var a = this._useExistingShaders(s);\n\n    return this._createProgram(a, i._type);\n  }\n\n  return !!(a = this._useNewShaders(t, e)) && this._createProgram(a, i._type);\n}, Curtains.prototype._useExistingShaders = function (t) {\n  return {\n    vs: {\n      vertexShader: t.vertexShader,\n      vsCode: t.vsCode\n    },\n    fs: {\n      fragmentShader: t.fragmentShader,\n      fsCode: t.fsCode\n    }\n  };\n}, Curtains.prototype._useNewShaders = function (t, e) {\n  var i = !0,\n      s = this._createShader(t, this.gl.VERTEX_SHADER),\n      r = this._createShader(e, this.gl.FRAGMENT_SHADER);\n\n  return s && r || (this.productionMode || console.warn(\"Unable to find or compile the vertex or fragment shader\"), i = !1), i ? {\n    vs: {\n      vertexShader: s,\n      vsCode: t\n    },\n    fs: {\n      fragmentShader: r,\n      fsCode: e\n    }\n  } : i;\n}, Curtains.prototype._createProgram = function (t, e) {\n  var i = this.gl,\n      s = !0,\n      r = i.createProgram();\n\n  if (s && (i.attachShader(r, t.vs.vertexShader), i.attachShader(r, t.fs.fragmentShader), i.linkProgram(r), this.productionMode || i.getProgramParameter(r, i.LINK_STATUS) || (console.warn(\"Unable to initialize the shader program.\"), s = !1), i.deleteShader(t.vs.vertexShader), i.deleteShader(t.fs.fragmentShader)), s) {\n    var a = {\n      id: this._glState.programs.length,\n      vsCode: t.vs.vsCode,\n      vertexShader: t.vs.vertexShader,\n      fsCode: t.fs.fsCode,\n      fragmentShader: t.fs.fragmentShader,\n      program: r,\n      type: e\n    };\n    return \"Plane\" === e && (this._drawStacks.opaque.programs[\"program-\" + a.id] = [], this._drawStacks.transparent.programs[\"program-\" + a.id] = []), this._glState.programs.push(a), a;\n  }\n\n  return s;\n}, Curtains.prototype._useProgram = function (t) {\n  null !== this._glState.currentProgramID && this._glState.currentProgramID === t.id || (this.gl.useProgram(t.program), this._glState.currentProgramID = t.id);\n}, Curtains.prototype.addPlane = function (t, e) {\n  if (this.gl) {\n    if (!t || 0 === t.length) return this.productionMode || console.warn(\"The html element you specified does not currently exists in the DOM\"), this._onErrorCallback && this._onErrorCallback(), !1;\n    var i = new Curtains.Plane(this, t, e);\n    return i._usedProgram ? this.planes.push(i) : i = !1, i;\n  }\n\n  return this.productionMode || console.warn(\"Unable to create a plane. The WebGl context couldn't be created\"), this._onErrorCallback && this._onErrorCallback(), null;\n}, Curtains.prototype.removePlane = function (t) {\n  t._canDraw = !1;\n  var e,\n      i = t._transparent ? \"transparent\" : \"opaque\";\n  t && t._dispose();\n\n  for (var s = 0; s < this.planes.length; s++) t.uuid === this.planes[s].uuid && (e = s);\n\n  t = null, this.planes[e] = null, this.planes.splice(e, 1);\n\n  for (s = 0; s < this._glState.programs.length; s++) this._drawStacks.opaque.programs[\"program-\" + this._glState.programs[s].id] = [], this._drawStacks.transparent.programs[\"program-\" + this._glState.programs[s].id] = [];\n\n  this._drawStacks.opaque.length = 0, this._drawStacks.transparent.length = 0;\n\n  for (s = 0; s < this.planes.length; s++) {\n    (t = this.planes[s]).index = s;\n    var r = t._transparent ? \"transparent\" : \"opaque\";\n    \"transparent\" === r ? this._drawStacks[r].programs[\"program-\" + t._usedProgram.id].unshift(t.index) : this._drawStacks[r].programs[\"program-\" + t._usedProgram.id].push(t.index), this._drawStacks[r].length++;\n  }\n\n  for (s = 0; s < this._drawStacks[i].order.length; s++) {\n    var a = this._drawStacks[i].order[s];\n    0 === this._drawStacks[i].programs[\"program-\" + a].length && this._drawStacks[i].order.splice(s, 1);\n  }\n\n  this.gl && this._clear(), this._glState.currentBuffersID = 0;\n}, Curtains.prototype._stackPlane = function (t) {\n  var e = t._transparent ? \"transparent\" : \"opaque\",\n      i = this._drawStacks[e];\n  \"transparent\" === e ? (i.programs[\"program-\" + t._usedProgram.id].unshift(t.index), i.order.includes(t._usedProgram.id) || i.order.unshift(t._usedProgram.id)) : (i.programs[\"program-\" + t._usedProgram.id].push(t.index), i.order.includes(t._usedProgram.id) || i.order.push(t._usedProgram.id)), i.length++;\n}, Curtains.prototype.addRenderTarget = function (t) {\n  return this.gl ? new Curtains.RenderTarget(this, t) : (this.productionMode || console.warn(\"Unable to create a render target. The WebGl context couldn't be created\"), this._onErrorCallback && this._onErrorCallback(), null);\n}, Curtains.prototype.removeRenderTarget = function (t) {\n  if (t._shaderPass) this.productionMode || console.warn(\"You're trying to remove a render target attached to a shader pass. You should remove that shader pass instead:\", t._shaderPass);else {\n    for (var e = 0; e < this.planes.length; e++) this.planes[e].target && this.planes[e].target.uuid === t.uuid && (this.planes[e].target = null);\n\n    var i;\n\n    for (e = 0; e < this.renderTargets.length; e++) t.uuid === this.renderTargets[e].uuid && (i = e);\n\n    this.renderTargets[i] = null, this.renderTargets.splice(i, 1), t && t._dispose(), t = null, this.gl && this._clear(), this._glState.currentBuffersID = 0;\n  }\n}, Curtains.prototype.addShaderPass = function (t) {\n  if (this.gl) {\n    var e = new Curtains.ShaderPass(this, t);\n    return e._usedProgram ? (t.renderTarget ? this._drawStacks.renderPasses.push(e.index) : this._drawStacks.scenePasses.push(e.index), this.shaderPasses.push(e)) : e = !1, e;\n  }\n\n  return this.productionMode || console.warn(\"Unable to create a shader pass. The WebGl context couldn't be created\"), this._onErrorCallback && this._onErrorCallback(), null;\n}, Curtains.prototype.removeShaderPass = function (t) {\n  var e;\n  t._canDraw = !1, t.target && (t.target._shaderPass = null, this.removeRenderTarget(t.target), t.target = null);\n\n  for (var i = 0; i < this.shaderPasses.length; i++) t.uuid === this.shaderPasses[i].uuid && (e = i);\n\n  this.shaderPasses.splice(e, 1), this._drawStacks.scenePasses = [], this._drawStacks.renderPasses = [];\n\n  for (i = 0; i < this.shaderPasses.length; i++) this.shaderPasses[i].index = i, this.shaderPasses[i]._isScenePass ? this._drawStacks.scenePasses.push(this.shaderPasses[i].index) : this._drawStacks.renderPasses.push(this.shaderPasses[i].index);\n\n  0 === this._drawStacks.scenePasses.length && (this._glState.scenePassIndex = null), t && t._dispose(), t = null, this.gl && this._clear(), this._glState.currentBuffersID = 0;\n}, Curtains.prototype._clear = function () {\n  this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);\n}, Curtains.prototype._bindFrameBuffer = function (t, e) {\n  var i = null;\n  t ? (i = t.index) !== this._glState.frameBufferID && (this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, t._frameBuffer), this.gl.viewport(0, 0, t._size.width, t._size.height), t._shouldClear && !e && this._clear()) : null !== this._glState.frameBufferID && (this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, null), this.gl.viewport(0, 0, this.gl.drawingBufferWidth, this.gl.drawingBufferHeight)), this._glState.frameBufferID = i;\n}, Curtains.prototype._setDepth = function (t) {\n  t && !this._glState.depthTest ? (this._glState.depthTest = t, this.gl.enable(this.gl.DEPTH_TEST)) : !t && this._glState.depthTest && (this._glState.depthTest = t, this.gl.disable(this.gl.DEPTH_TEST));\n}, Curtains.prototype._setBlendFunc = function () {\n  var t = this.gl;\n  t.enable(t.BLEND), this.premultipliedAlpha ? t.blendFuncSeparate(t.ONE, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA) : t.blendFuncSeparate(t.SRC_ALPHA, t.ONE_MINUS_SRC_ALPHA, t.ONE, t.ONE_MINUS_SRC_ALPHA);\n}, Curtains.prototype._setFaceCulling = function (t) {\n  var e = this.gl;\n  if (this._glState.cullFace !== t) if (this._glState.cullFace = t, \"none\" === t) e.disable(e.CULL_FACE);else {\n    var i = \"front\" === t ? e.FRONT : e.BACK;\n    e.enable(e.CULL_FACE), e.cullFace(i);\n  }\n}, Curtains.prototype._generateUUID = function () {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (t) {\n    var e = 16 * Math.random() | 0;\n    return (\"x\" == t ? e : 3 & e | 8).toString(16).toUpperCase();\n  });\n}, Curtains.prototype._multiplyMatrix = function (t, e) {\n  var i = new Float32Array(16);\n  return i[0] = e[0] * t[0] + e[1] * t[4] + e[2] * t[8] + e[3] * t[12], i[1] = e[0] * t[1] + e[1] * t[5] + e[2] * t[9] + e[3] * t[13], i[2] = e[0] * t[2] + e[1] * t[6] + e[2] * t[10] + e[3] * t[14], i[3] = e[0] * t[3] + e[1] * t[7] + e[2] * t[11] + e[3] * t[15], i[4] = e[4] * t[0] + e[5] * t[4] + e[6] * t[8] + e[7] * t[12], i[5] = e[4] * t[1] + e[5] * t[5] + e[6] * t[9] + e[7] * t[13], i[6] = e[4] * t[2] + e[5] * t[6] + e[6] * t[10] + e[7] * t[14], i[7] = e[4] * t[3] + e[5] * t[7] + e[6] * t[11] + e[7] * t[15], i[8] = e[8] * t[0] + e[9] * t[4] + e[10] * t[8] + e[11] * t[12], i[9] = e[8] * t[1] + e[9] * t[5] + e[10] * t[9] + e[11] * t[13], i[10] = e[8] * t[2] + e[9] * t[6] + e[10] * t[10] + e[11] * t[14], i[11] = e[8] * t[3] + e[9] * t[7] + e[10] * t[11] + e[11] * t[15], i[12] = e[12] * t[0] + e[13] * t[4] + e[14] * t[8] + e[15] * t[12], i[13] = e[12] * t[1] + e[13] * t[5] + e[14] * t[9] + e[15] * t[13], i[14] = e[12] * t[2] + e[13] * t[6] + e[14] * t[10] + e[15] * t[14], i[15] = e[12] * t[3] + e[13] * t[7] + e[14] * t[11] + e[15] * t[15], i;\n}, Curtains.prototype._scaleMatrix = function (t, e, i, s) {\n  var r = new Float32Array(16);\n  return r[0] = e * t[0], r[1] = e * t[1], r[2] = e * t[2], r[3] = e * t[3], r[4] = i * t[4], r[5] = i * t[5], r[6] = i * t[6], r[7] = i * t[7], r[8] = s * t[8], r[9] = s * t[9], r[10] = s * t[10], r[11] = s * t[11], t !== r && (r[12] = t[12], r[13] = t[13], r[14] = t[14], r[15] = t[15]), r;\n}, Curtains.prototype._composeMatrixFromOrigin = function (t, e, i, s) {\n  var r = new Float32Array(16),\n      a = e[0],\n      n = e[1],\n      o = e[2],\n      h = e[3],\n      u = a + a,\n      l = n + n,\n      _ = o + o,\n      c = a * u,\n      d = a * l,\n      p = a * _,\n      g = n * l,\n      f = n * _,\n      m = o * _,\n      x = h * u,\n      v = h * l,\n      P = h * _,\n      y = i.x,\n      b = i.y,\n      C = s.x,\n      T = s.y,\n      S = s.z,\n      w = (1 - (g + m)) * y,\n      R = (d + P) * y,\n      M = (p - v) * y,\n      E = (d - P) * b,\n      B = (1 - (c + m)) * b,\n      D = (f + x) * b,\n      F = 1 * (p + v),\n      A = 1 * (f - x),\n      L = 1 * (1 - (c + g));\n\n  return r[0] = w, r[1] = R, r[2] = M, r[3] = 0, r[4] = E, r[5] = B, r[6] = D, r[7] = 0, r[8] = F, r[9] = A, r[10] = L, r[11] = 0, r[12] = t.x + C - (w * C + E * T + F * S), r[13] = t.y + T - (R * C + B * T + A * S), r[14] = t.z + S - (M * C + D * T + L * S), r[15] = 1, r;\n}, Curtains.prototype._applyMatrixToPoint = function (t, e) {\n  var i = [],\n      s = t[0],\n      r = t[1],\n      a = t[2];\n  i[0] = e[0] * s + e[4] * r + e[8] * a + e[12], i[1] = e[1] * s + e[5] * r + e[9] * a + e[13], i[2] = e[2] * s + e[6] * r + e[10] * a + e[14];\n  var n = e[3] * s + e[7] * r + e[11] * a + e[15];\n  return n = n || 1, i[0] /= n, i[1] /= n, i[2] /= n, i;\n}, Curtains.prototype._readyToDraw = function () {\n  this.container.appendChild(this.glCanvas), this._setBlendFunc(), this._setDepth(!0), console.log(\"curtains.js - v6.1\"), this._animationFrameID = null, this._autoRender && this._animate();\n}, Curtains.prototype._animate = function () {\n  this.render(), this._animationFrameID = window.requestAnimationFrame(this._animate.bind(this));\n}, Curtains.prototype._drawPlaneStack = function (t) {\n  for (var e = 0; e < this._drawStacks[t].order.length; e++) for (var i = this._drawStacks[t].order[e], s = this._drawStacks[t].programs[\"program-\" + i], r = 0; r < s.length; r++) {\n    var a = this.planes[s[r]];\n    a && a._drawPlane();\n  }\n}, Curtains.prototype.render = function () {\n  if (this._drawingEnabled || this._forceRender) {\n    this._forceRender && (this._forceRender = !1), this._onRenderCallback && this._onRenderCallback(), this._clear(), this._drawStacks.scenePasses.length > 0 && 0 === this._drawStacks.renderPasses.length && (this._glState.scenePassIndex = 0, this._bindFrameBuffer(this.shaderPasses[this._drawStacks.scenePasses[0]].target)), this._drawPlaneStack(\"opaque\"), this._drawStacks.transparent.length && (this.gl.clearDepth(1), this.gl.clear(this.gl.DEPTH_BUFFER_BIT), this._drawPlaneStack(\"transparent\")), this._drawStacks.scenePasses.length > 0 && this._drawStacks.renderPasses.length > 0 && (this._glState.scenePassIndex = 0, this._bindFrameBuffer(this.shaderPasses[this._drawStacks.scenePasses[0]].target));\n\n    for (var t = 0; t < this._drawStacks.renderPasses.length; t++) {\n      this.shaderPasses[this._drawStacks.renderPasses[t]]._drawPlane();\n    }\n\n    if (this._drawStacks.scenePasses.length > 0) for (t = 0; t < this._drawStacks.scenePasses.length; t++) {\n      this.shaderPasses[this._drawStacks.scenePasses[t]]._drawPlane();\n    }\n  }\n}, Curtains.prototype.onAfterResize = function (t) {\n  return t && (this._onAfterResizeCallback = t), this;\n}, Curtains.prototype.onError = function (t) {\n  return t && (this._onErrorCallback = t), this;\n}, Curtains.prototype.onContextLost = function (t) {\n  return t && (this._onContextLostCallback = t), this;\n}, Curtains.prototype.onContextRestored = function (t) {\n  return t && (this._onContextRestoredCallback = t), this;\n}, Curtains.prototype.onRender = function (t) {\n  return t && (this._onRenderCallback = t), this;\n}, Curtains.prototype.onScroll = function (t) {\n  return t && (this._onScrollCallback = t), this;\n}, Curtains.BasePlane = function (t, e, i) {\n  this._type = this._type || \"BasicPlane\", this._curtains = t, this.htmlElement = e, this.uuid = this._curtains._generateUUID(), this._initBasePlane(i);\n}, Curtains.BasePlane.prototype._initBasePlane = function (t) {\n  if (t || (t = {}), this._canDraw = !1, this.shareProgram = t.shareProgram || !1, this._updatePerspectiveMatrix = !1, this._updateMVMatrix = !1, this._definition = {\n    width: parseInt(t.widthSegments) || 1,\n    height: parseInt(t.heightSegments) || 1\n  }, this._definition.buffersID = this._definition.width * this._definition.height + this._definition.width, this._depthTest = t.depthTest, null !== this._depthTest && void 0 !== this._depthTest || (this._depthTest = !0), this.cullFace = t.cullFace, \"back\" !== this.cullFace && \"front\" !== this.cullFace && \"none\" !== this.cullFace && (this.cullFace = \"back\"), this._activeTextures = [], t.uniforms || (t.uniforms = {}), this.uniforms = {}, t.uniforms) for (var e in t.uniforms) {\n    var i = t.uniforms[e];\n    this.uniforms[e] = {\n      name: i.name,\n      type: i.type,\n      value: i.value,\n      lastValue: i.value\n    };\n  }\n\n  var s = this._setupShaders(t);\n\n  return this._usedProgram = this._curtains._setupProgram(s.vertexShaderCode, s.fragmentShaderCode, this), this._loadingManager = {\n    sourcesLoaded: 0,\n    initSourcesToLoad: 0,\n    complete: !1\n  }, this.images = [], this.videos = [], this.canvases = [], this.textures = [], this.crossOrigin = t.crossOrigin || \"anonymous\", this.userData = {}, !!this._usedProgram && (this._shouldDraw = !0, this.visible = !0, this._setAttributes(), this._setDocumentSizes(), this._setUniforms(), this._initializeBuffers(), this._canDraw = !0, this);\n}, Curtains.BasePlane.prototype._getDefaultVS = function () {\n  return this._curtains.productionMode || console.warn(\"No vertex shader provided, will use a default one\"), \"precision mediump float;\\nattribute vec3 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying vec3 vVertexPosition;varying vec2 vTextureCoord;void main() {vTextureCoord = aTextureCoord;vVertexPosition = aVertexPosition;gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);}\";\n}, Curtains.BasePlane.prototype._getDefaultFS = function () {\n  return \"precision mediump float;\\nvarying vec3 vVertexPosition;varying vec2 vTextureCoord;void main( void ) {gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);}\";\n}, Curtains.BasePlane.prototype._setupShaders = function (t) {\n  var e,\n      i,\n      s = t.vertexShaderID || this.htmlElement.getAttribute(\"data-vs-id\"),\n      r = t.fragmentShaderID || this.htmlElement.getAttribute(\"data-fs-id\");\n  return t.vertexShader || (e = s && document.getElementById(s) ? document.getElementById(s).innerHTML : this._getDefaultVS()), t.fragmentShader || (r && document.getElementById(r) ? i = document.getElementById(r).innerHTML : (this._curtains.productionMode || console.warn(\"No fragment shader provided, will use a default one\"), i = this._getDefaultFS())), {\n    vertexShaderCode: t.vertexShader || e,\n    fragmentShaderCode: t.fragmentShader || i\n  };\n}, Curtains.BasePlane.prototype._handleUniformSetting = function (t, e, i) {\n  var s = this._curtains.gl;\n\n  switch (t) {\n    case \"1i\":\n      s.uniform1i(e, i);\n      break;\n\n    case \"1iv\":\n      s.uniform1iv(e, i);\n      break;\n\n    case \"1f\":\n      s.uniform1f(e, i);\n      break;\n\n    case \"1fv\":\n      s.uniform1fv(e, i);\n      break;\n\n    case \"2i\":\n      s.uniform2i(e, i[0], i[1]);\n      break;\n\n    case \"2iv\":\n      s.uniform2iv(e, i);\n      break;\n\n    case \"2f\":\n      s.uniform2f(e, i[0], i[1]);\n      break;\n\n    case \"2fv\":\n      s.uniform2fv(e, i);\n      break;\n\n    case \"3i\":\n      s.uniform3i(e, i[0], i[1], i[2]);\n      break;\n\n    case \"3iv\":\n      s.uniform3iv(e, i);\n      break;\n\n    case \"3f\":\n      s.uniform3f(e, i[0], i[1], i[2]);\n      break;\n\n    case \"3fv\":\n      s.uniform3fv(e, i);\n      break;\n\n    case \"4i\":\n      s.uniform4i(e, i[0], i[1], i[2], i[3]);\n      break;\n\n    case \"4iv\":\n      s.uniform4iv(e, i);\n      break;\n\n    case \"4f\":\n      s.uniform4f(e, i[0], i[1], i[2], i[3]);\n      break;\n\n    case \"4fv\":\n      s.uniform4fv(e, i);\n      break;\n\n    case \"mat2\":\n      s.uniformMatrix2fv(e, !1, i);\n      break;\n\n    case \"mat3\":\n      s.uniformMatrix3fv(e, !1, i);\n      break;\n\n    case \"mat4\":\n      s.uniformMatrix4fv(e, !1, i);\n      break;\n\n    default:\n      this._curtains.productionMode || console.warn(\"This uniform type is not handled : \", t);\n  }\n}, Curtains.BasePlane.prototype._setUniforms = function () {\n  var t = this._curtains,\n      e = t.gl;\n\n  t._useProgram(this._usedProgram);\n\n  for (var i = e.getProgramParameter(this._usedProgram.program, e.ACTIVE_UNIFORMS), s = 0; s < i; s++) {\n    var r = e.getActiveUniform(this._usedProgram.program, s);\n    r.type === e.SAMPLER_2D && this._activeTextures.push(r);\n  }\n\n  if (this.uniforms) for (var a in this.uniforms) {\n    var n = this.uniforms[a];\n    n.location = e.getUniformLocation(this._usedProgram.program, n.name), n.type || (Array.isArray(n.value) ? 4 === n.value.length ? (n.type = \"4f\", t.productionMode || console.warn(\"No uniform type declared for \" + n.name + \", applied a 4f (array of 4 floats) uniform type\")) : 3 === n.value.length ? (n.type = \"3f\", t.productionMode || console.warn(\"No uniform type declared for \" + n.name + \", applied a 3f (array of 3 floats) uniform type\")) : 2 === n.value.length && (n.type = \"2f\", t.productionMode || console.warn(\"No uniform type declared for \" + n.name + \", applied a 2f (array of 2 floats) uniform type\")) : n.value.constructor === Float32Array ? 16 === n.value.length ? (n.type = \"mat4\", t.productionMode || console.warn(\"No uniform type declared for \" + n.name + \", applied a mat4 (4x4 matrix array) uniform type\")) : 9 === n.value.length ? (n.type = \"mat3\", t.productionMode || console.warn(\"No uniform type declared for \" + n.name + \", applied a mat3 (3x3 matrix array) uniform type\")) : 4 === n.value.length && (n.type = \"mat2\", t.productionMode || console.warn(\"No uniform type declared for \" + n.name + \", applied a mat2 (2x2 matrix array) uniform type\")) : (n.type = \"1f\", t.productionMode || console.warn(\"No uniform type declared for \" + n.name + \", applied a 1f (float) uniform type\"))), this._handleUniformSetting(n.type, n.location, n.value);\n  }\n}, Curtains.BasePlane.prototype._updateUniforms = function () {\n  if (this.uniforms) for (var t in this.uniforms) {\n    var e = this.uniforms[t];\n    this.shareProgram ? this._handleUniformSetting(e.type, e.location, e.value) : (e.value.length || e.value === e.lastValue ? JSON.stringify(e.value) !== JSON.stringify(e.lastValue) && this._handleUniformSetting(e.type, e.location, e.value) : this._handleUniformSetting(e.type, e.location, e.value), e.lastValue = e.value);\n  }\n}, Curtains.BasePlane.prototype._setAttributes = function () {\n  this._attributes || (this._attributes = {}), this._attributes.vertexPosition = {\n    name: \"aVertexPosition\",\n    location: this._curtains.gl.getAttribLocation(this._usedProgram.program, \"aVertexPosition\")\n  }, this._attributes.textureCoord = {\n    name: \"aTextureCoord\",\n    location: this._curtains.gl.getAttribLocation(this._usedProgram.program, \"aTextureCoord\")\n  };\n}, Curtains.BasePlane.prototype._setPlaneVertices = function () {\n  this._geometry = {\n    vertices: []\n  }, this._material = {\n    uvs: []\n  };\n\n  for (var t = 0; t < this._definition.height; ++t) for (var e = t / this._definition.height, i = 0; i < this._definition.width; ++i) {\n    var s = i / this._definition.width;\n    this._material.uvs.push(s), this._material.uvs.push(e), this._material.uvs.push(0), this._geometry.vertices.push(2 * (s - .5)), this._geometry.vertices.push(2 * (e - .5)), this._geometry.vertices.push(0), this._material.uvs.push(s + 1 / this._definition.width), this._material.uvs.push(e), this._material.uvs.push(0), this._geometry.vertices.push(2 * (s + 1 / this._definition.width - .5)), this._geometry.vertices.push(2 * (e - .5)), this._geometry.vertices.push(0), this._material.uvs.push(s), this._material.uvs.push(e + 1 / this._definition.height), this._material.uvs.push(0), this._geometry.vertices.push(2 * (s - .5)), this._geometry.vertices.push(2 * (e + 1 / this._definition.height - .5)), this._geometry.vertices.push(0), this._material.uvs.push(s), this._material.uvs.push(e + 1 / this._definition.height), this._material.uvs.push(0), this._geometry.vertices.push(2 * (s - .5)), this._geometry.vertices.push(2 * (e + 1 / this._definition.height - .5)), this._geometry.vertices.push(0), this._material.uvs.push(s + 1 / this._definition.width), this._material.uvs.push(e), this._material.uvs.push(0), this._geometry.vertices.push(2 * (s + 1 / this._definition.width - .5)), this._geometry.vertices.push(2 * (e - .5)), this._geometry.vertices.push(0), this._material.uvs.push(s + 1 / this._definition.width), this._material.uvs.push(e + 1 / this._definition.height), this._material.uvs.push(0), this._geometry.vertices.push(2 * (s + 1 / this._definition.width - .5)), this._geometry.vertices.push(2 * (e + 1 / this._definition.height - .5)), this._geometry.vertices.push(0);\n  }\n}, Curtains.BasePlane.prototype._initializeBuffers = function () {\n  var t = this._curtains.gl;\n  this._geometry || this._material || this._setPlaneVertices(), this._attributes && (this._geometry.bufferInfos = {\n    id: t.createBuffer(),\n    itemSize: 3,\n    numberOfItems: this._geometry.vertices.length / 3\n  }, this._material.bufferInfos = {\n    id: t.createBuffer(),\n    itemSize: 3,\n    numberOfItems: this._material.uvs.length / 3\n  }, this._curtains._isWebGL2 ? (this._vao = t.createVertexArray(), t.bindVertexArray(this._vao)) : this._curtains._extensions.OES_vertex_array_object && (this._vao = this._curtains._extensions.OES_vertex_array_object.createVertexArrayOES(), this._curtains._extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao)), t.enableVertexAttribArray(this._attributes.vertexPosition.location), t.bindBuffer(t.ARRAY_BUFFER, this._geometry.bufferInfos.id), t.bufferData(t.ARRAY_BUFFER, new Float32Array(this._geometry.vertices), t.STATIC_DRAW), t.vertexAttribPointer(this._attributes.vertexPosition.location, this._geometry.bufferInfos.itemSize, t.FLOAT, !1, 0, 0), t.enableVertexAttribArray(this._attributes.textureCoord.location), t.bindBuffer(t.ARRAY_BUFFER, this._material.bufferInfos.id), t.bufferData(t.ARRAY_BUFFER, new Float32Array(this._material.uvs), t.STATIC_DRAW), t.vertexAttribPointer(this._attributes.textureCoord.location, this._material.bufferInfos.itemSize, t.FLOAT, !1, 0, 0), this._curtains._glState.currentBuffersID = this._definition.buffersID);\n}, Curtains.BasePlane.prototype._restoreContext = function () {\n  var t = this._curtains;\n\n  if (this._canDraw = !1, this._matrices && (this._matrices = null), this._attributes = null, this._geometry.bufferInfos = null, this._material.bufferInfos = null, this._usedProgram = t._setupProgram(this._usedProgram.vsCode, this._usedProgram.fsCode, this), this._usedProgram) {\n    if (this._setAttributes(), this._activeTextures = [], this._setUniforms(), this._initializeBuffers(), \"ShaderPass\" === this._type) {\n      if (this._isScenePass) this.target._frameBuffer = null, this.target._depthBuffer = null, t.renderTargets.splice(this.target.index, 1), this.textures.splice(0, 1), this._createFrameBuffer(), t._drawStacks.scenePasses.push(this.index);else {\n        var e = t.renderTargets[this.target.index];\n        this.setRenderTarget(e), this.target._shaderPass = e, this.textures[0]._canDraw = !1, this.textures[0]._setTextureUniforms(), this.textures[0].setFromTexture(e.textures[0]), t._drawStacks.renderPasses.push(this.index);\n      }\n    } else this.target && this.setRenderTarget(t.renderTargets[this.target.index]);\n\n    for (var i = \"ShaderPass\" === this._type ? 1 : 0; i < this.textures.length; i++) this.textures[i]._restoreContext();\n\n    \"Plane\" === this._type && (this._initMatrices(), this.setPerspective(this._fov, this._nearPlane, this._farPlane), this._applyWorldPositions(), t._stackPlane(this)), this._canDraw = !0;\n  }\n}, Curtains.BasePlane.prototype._setDocumentSizes = function () {\n  var t = this.htmlElement.getBoundingClientRect();\n  0 === t.width && 0 === t.height && (t = this._curtains._boundingRect), this._boundingRect || (this._boundingRect = {}), this._boundingRect.document = {\n    width: t.width * this._curtains.pixelRatio,\n    height: t.height * this._curtains.pixelRatio,\n    top: t.top * this._curtains.pixelRatio,\n    left: t.left * this._curtains.pixelRatio\n  };\n}, Curtains.BasePlane.prototype.getBoundingRect = function () {\n  return {\n    width: this._boundingRect.document.width,\n    height: this._boundingRect.document.height,\n    top: this._boundingRect.document.top,\n    left: this._boundingRect.document.left,\n    right: this._boundingRect.document.left + this._boundingRect.document.width,\n    bottom: this._boundingRect.document.top + this._boundingRect.document.height\n  };\n}, Curtains.BasePlane.prototype._getNearPlaneIntersections = function (t, e, i) {\n  function s(t, e) {\n    for (var i = [e[0] - t[0], e[1] - t[1], e[2] - t[2]], s = t.slice(); s[2] > -1;) s[0] += i[0], s[1] += i[1], s[2] += i[2];\n\n    return s;\n  }\n\n  if (1 === i.length) 0 === i[0] ? (e[0] = s(e[1], this._curtains._applyMatrixToPoint([.95, 1, 0], this._matrices.mVPMatrix)), e.push(s(e[3], this._curtains._applyMatrixToPoint([-1, -.95, 0], this._matrices.mVPMatrix)))) : 1 === i[0] ? (e[1] = s(e[0], this._curtains._applyMatrixToPoint([-.95, 1, 0], this._matrices.mVPMatrix)), e.push(s(e[2], this._curtains._applyMatrixToPoint([1, -.95, 0], this._matrices.mVPMatrix)))) : 2 === i[0] ? (e[2] = s(e[3], this._curtains._applyMatrixToPoint([-.95, -1, 0], this._matrices.mVPMatrix)), e.push(s(e[1], this._curtains._applyMatrixToPoint([1, .95, 0], this._matrices.mVPMatrix)))) : 3 === i[0] && (e[3] = s(e[2], this._curtains._applyMatrixToPoint([.95, -1, 0], this._matrices.mVPMatrix)), e.push(s(e[0], this._curtains._applyMatrixToPoint([-1, .95, 0], this._matrices.mVPMatrix))));else if (2 === i.length) 0 === i[0] && 1 === i[1] ? (e[0] = s(e[3], this._curtains._applyMatrixToPoint([-1, -.95, 0], this._matrices.mVPMatrix)), e[1] = s(e[2], this._curtains._applyMatrixToPoint([1, -.95, 0], this._matrices.mVPMatrix))) : 1 === i[0] && 2 === i[1] ? (e[1] = s(e[0], this._curtains._applyMatrixToPoint([-.95, 1, 0], this._matrices.mVPMatrix)), e[2] = s(e[3], this._curtains._applyMatrixToPoint([-.95, -1, 0], this._matrices.mVPMatrix))) : 2 === i[0] && 3 === i[1] ? (e[2] = s(e[1], this._curtains._applyMatrixToPoint([1, .95, 0], this._matrices.mVPMatrix)), e[3] = s(e[0], this._curtains._applyMatrixToPoint([-1, .95, 0], this._matrices.mVPMatrix))) : 0 === i[0] && 3 === i[1] && (e[0] = s(e[1], this._curtains._applyMatrixToPoint([.95, 1, 0], this._matrices.mVPMatrix)), e[3] = s(e[2], this._curtains._applyMatrixToPoint([.95, -1, 0], this._matrices.mVPMatrix)));else if (3 === i.length) {\n    for (var r = 0, a = 0; a < t.length; a++) i.includes(a) || (r = a);\n\n    e = [e[r]], 0 === r ? (e.push(s(e[0], this._curtains._applyMatrixToPoint([-.95, 1, 0], this._matrices.mVPMatrix))), e.push(s(e[0], this._curtains._applyMatrixToPoint([-1, .95, 0], this._matrices.mVPMatrix)))) : 1 === r ? (e.push(s(e[0], this._curtains._applyMatrixToPoint([.95, 1, 0], this._matrices.mVPMatrix))), e.push(s(e[0], this._curtains._applyMatrixToPoint([1, .95, 0], this._matrices.mVPMatrix)))) : 2 === r ? (e.push(s(e[0], this._curtains._applyMatrixToPoint([.95, -1, 0], this._matrices.mVPMatrix))), e.push(s(e[0], this._curtains._applyMatrixToPoint([1, -.95, 0], this._matrices.mVPMatrix)))) : 3 === r && (e.push(s(e[0], this._curtains._applyMatrixToPoint([-.95, -1, 0], this._matrices.mVPMatrix))), e.push(s(e[0], this._curtains._applyMatrixToPoint([-1, -.95, 0], this._matrices.mVPMatrix))));\n  } else for (a = 0; a < t.length; a++) e[a][0] = 1e4, e[a][1] = 1e4;\n  return e;\n}, Curtains.BasePlane.prototype._getWorldCoords = function () {\n  for (var t = [[-1, 1, 0], [1, 1, 0], [1, -1, 0], [-1, -1, 0]], e = [], i = [], s = 0; s < t.length; s++) {\n    var r = this._curtains._applyMatrixToPoint(t[s], this._matrices.mVPMatrix);\n\n    e.push(r), Math.abs(r[2]) > 1 && i.push(s);\n  }\n\n  i.length && (e = this._getNearPlaneIntersections(t, e, i));\n  var a = 1 / 0,\n      n = -1 / 0,\n      o = 1 / 0,\n      h = -1 / 0;\n\n  for (s = 0; s < e.length; s++) {\n    var u = e[s];\n    u[0] < a && (a = u[0]), u[0] > n && (n = u[0]), u[1] < o && (o = u[1]), u[1] > h && (h = u[1]);\n  }\n\n  return {\n    top: h,\n    right: n,\n    bottom: o,\n    left: a\n  };\n}, Curtains.BasePlane.prototype.getWebGLBoundingRect = function () {\n  if (this._matrices.mVPMatrix) {\n    var t = this._getWorldCoords(),\n        e = {\n      top: 1 - (t.top + 1) / 2,\n      right: (t.right + 1) / 2,\n      bottom: 1 - (t.bottom + 1) / 2,\n      left: (t.left + 1) / 2\n    };\n\n    return e.width = e.right - e.left, e.height = e.bottom - e.top, {\n      width: e.width * this._curtains._boundingRect.width,\n      height: e.height * this._curtains._boundingRect.height,\n      top: e.top * this._curtains._boundingRect.height + this._curtains._boundingRect.top,\n      left: e.left * this._curtains._boundingRect.width + this._curtains._boundingRect.left,\n      right: e.left * this._curtains._boundingRect.width + this._curtains._boundingRect.left + e.width * this._curtains._boundingRect.width,\n      bottom: e.top * this._curtains._boundingRect.height + this._curtains._boundingRect.top + e.height * this._curtains._boundingRect.height\n    };\n  }\n\n  return this._boundingRect.document;\n}, Curtains.BasePlane.prototype._getWebGLDrawRect = function () {\n  var t = this.getWebGLBoundingRect();\n  return {\n    top: t.top - this.drawCheckMargins.top,\n    right: t.right + this.drawCheckMargins.right,\n    bottom: t.bottom + this.drawCheckMargins.bottom,\n    left: t.left - this.drawCheckMargins.left\n  };\n}, Curtains.BasePlane.prototype.planeResize = function () {\n  this._setDocumentSizes(), \"Plane\" === this._type && (this.setPerspective(this._fov, this._nearPlane, this._farPlane), this._applyWorldPositions());\n\n  for (var t = 0; t < this.textures.length; t++) this.textures[t].resize();\n\n  var e = this;\n  setTimeout(function () {\n    e._onAfterResizeCallback && e._onAfterResizeCallback();\n  }, 0);\n}, Curtains.BasePlane.prototype.createTexture = function (t) {\n  \"string\" == typeof t && (t = {\n    sampler: t\n  }, this._curtains.productionMode || console.warn(\"Since v5.1 you should use an object to pass your sampler name with the createTexture() method. Please refer to the docs: https://www.curtainsjs.com/documentation.html (texture concerned: \", t.sampler, \")\")), t || (t = {});\n  var e = new Curtains.Texture(this, {\n    index: this.textures.length,\n    sampler: t.sampler || null,\n    fromTexture: t.fromTexture || null,\n    isFBOTexture: t.isFBOTexture || !1\n  });\n  return this.textures.push(e), e;\n}, Curtains.BasePlane.prototype._isPlaneReady = function () {\n  if (!this._loadingManager.complete && this._loadingManager.sourcesLoaded >= this._loadingManager.initSourcesToLoad) {\n    this._loadingManager.complete = !0, this._curtains.needRender();\n    var t = this;\n    setTimeout(function () {\n      t._onReadyCallback && t._onReadyCallback();\n    }, 0);\n  }\n}, Curtains.BasePlane.prototype.loadSources = function (t) {\n  for (var e = 0; e < t.length; e++) this.loadSource(t[e]);\n}, Curtains.BasePlane.prototype.loadSource = function (t) {\n  \"IMG\" === t.tagName.toUpperCase() ? this.loadImage(t) : \"VIDEO\" === t.tagName.toUpperCase() ? this.loadVideo(t) : \"CANVAS\" === t.tagName.toUpperCase() ? this.loadCanvas(t) : this._curtains.productionMode || console.warn(\"this HTML tag could not be converted into a texture:\", t.tagName);\n}, Curtains.BasePlane.prototype._sourceLoadError = function (t, e) {\n  this._curtains.productionMode || console.warn(\"There has been an error:\", e, \"while loading this source:\", t);\n}, Curtains.BasePlane.prototype._getTextureFromCache = function (t) {\n  var e = !1;\n  if (this._curtains._imageCache.length > 0) for (var i = 0; i < this._curtains._imageCache.length; i++) {\n    var s = this._curtains._imageCache[i];\n    s.source && \"image\" === s.type && s.source.src === t.src && (e = s);\n  }\n  return e;\n}, Curtains.BasePlane.prototype.loadImage = function (t) {\n  var e = t;\n  e.crossOrigin = this.crossOrigin || \"anonymous\", e.sampler = t.getAttribute(\"data-sampler\") || null;\n\n  var i = this._getTextureFromCache(t);\n\n  if (i) return this.createTexture({\n    sampler: e.sampler,\n    fromTexture: i\n  }), this.images.push(i.source), void this._isPlaneReady();\n  var s = this.createTexture({\n    sampler: e.sampler\n  });\n  if (s._onSourceLoadedHandler = s._onSourceLoaded.bind(s, e), e.complete) s._onSourceLoaded(e);else if (e.decode) {\n    var r = this;\n    e.decode().then(s._onSourceLoadedHandler).catch(function () {\n      e.addEventListener(\"load\", s._onSourceLoadedHandler, !1), e.addEventListener(\"error\", r._sourceLoadError.bind(r, e), !1);\n    });\n  } else e.addEventListener(\"load\", s._onSourceLoadedHandler, !1), e.addEventListener(\"error\", this._sourceLoadError.bind(this, e), !1);\n  this.images.push(e);\n}, Curtains.BasePlane.prototype.loadVideo = function (t) {\n  var e = t;\n  e.preload = !0, e.muted = !0, e.loop = !0, e.sampler = t.getAttribute(\"data-sampler\") || null, e.crossOrigin = this.crossOrigin || \"anonymous\";\n  var i = this.createTexture({\n    sampler: e.sampler\n  });\n  i._onSourceLoadedHandler = i._onVideoLoadedData.bind(i, e), e.addEventListener(\"canplaythrough\", i._onSourceLoadedHandler, !1), e.addEventListener(\"error\", this._sourceLoadError.bind(this, e), !1), e.readyState >= e.HAVE_FUTURE_DATA && i._onSourceLoaded(e), e.load(), this.videos.push(e);\n}, Curtains.BasePlane.prototype.loadCanvas = function (t) {\n  var e = t;\n  e.sampler = t.getAttribute(\"data-sampler\") || null;\n  var i = this.createTexture({\n    sampler: e.sampler\n  });\n  this.canvases.push(e), i._onSourceLoaded(e);\n}, Curtains.BasePlane.prototype.loadImages = function (t) {\n  for (var e = 0; e < t.length; e++) this.loadImage(t[e]);\n}, Curtains.BasePlane.prototype.loadVideos = function (t) {\n  for (var e = 0; e < t.length; e++) this.loadVideo(t[e]);\n}, Curtains.BasePlane.prototype.loadCanvases = function (t) {\n  for (var e = 0; e < t.length; e++) this.loadCanvas(t[e]);\n}, Curtains.BasePlane.prototype.playVideos = function () {\n  for (var t = 0; t < this.textures.length; t++) {\n    var e = this.textures[t];\n\n    if (\"video\" === e.type) {\n      var i = e.source.play(),\n          s = this;\n      void 0 !== i && i.catch(function (t) {\n        s._curtains.productionMode || console.warn(\"Could not play the video : \", t);\n      });\n    }\n  }\n}, Curtains.BasePlane.prototype.mouseToPlaneCoords = function (t, e) {\n  var i = this.scale ? this.scale : {\n    x: 1,\n    y: 1\n  },\n      s = (this._boundingRect.document.width - this._boundingRect.document.width * i.x) / 2,\n      r = (this._boundingRect.document.height - this._boundingRect.document.height * i.y) / 2,\n      a = this._boundingRect.document.width * i.x / this._curtains.pixelRatio,\n      n = this._boundingRect.document.height * i.y / this._curtains.pixelRatio,\n      o = (this._boundingRect.document.top + r) / this._curtains.pixelRatio;\n  return {\n    x: (t - (this._boundingRect.document.left + s) / this._curtains.pixelRatio) / a * 2 - 1,\n    y: 1 - (e - o) / n * 2\n  };\n}, Curtains.BasePlane.prototype._bindPlaneBuffers = function () {\n  var t = this._curtains,\n      e = t.gl;\n  this._vao ? t._isWebGL2 ? t.gl.bindVertexArray(this._vao) : t._extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao) : (e.enableVertexAttribArray(this._attributes.vertexPosition.location), e.bindBuffer(e.ARRAY_BUFFER, this._geometry.bufferInfos.id), e.vertexAttribPointer(this._attributes.vertexPosition.location, this._geometry.bufferInfos.itemSize, e.FLOAT, !1, 0, 0), e.enableVertexAttribArray(this._attributes.textureCoord.location), e.bindBuffer(e.ARRAY_BUFFER, this._material.bufferInfos.id), e.vertexAttribPointer(this._attributes.textureCoord.location, this._material.bufferInfos.itemSize, e.FLOAT, !1, 0, 0)), t._glState.currentBuffersID = this._definition.buffersID;\n}, Curtains.BasePlane.prototype._bindPlaneTexture = function (t) {\n  var e = this._curtains.gl;\n  t._canDraw && (e.activeTexture(e.TEXTURE0 + t.index), e.bindTexture(e.TEXTURE_2D, t._sampler.texture));\n}, Curtains.BasePlane.prototype.setRenderTarget = function (t) {\n  t && t._type && \"RenderTarget\" === t._type ? this.target = t : this._curtains.productionMode || console.warn(\"Could not set the render target because the argument passed is not a RenderTarget class object\", t);\n}, Curtains.BasePlane.prototype._drawPlane = function () {\n  var t = this._curtains,\n      e = t.gl;\n\n  if (this._canDraw && (this._onRenderCallback && this._onRenderCallback(), \"ShaderPass\" === this._type ? this._isScenePass ? t._glState.scenePassIndex + 1 < t._drawStacks.scenePasses.length ? (t._bindFrameBuffer(t.shaderPasses[t._drawStacks.scenePasses[t._glState.scenePassIndex + 1]].target), t._glState.scenePassIndex++) : t._bindFrameBuffer(null) : null === t._glState.scenePassIndex && t._bindFrameBuffer(null) : (this.target ? t._bindFrameBuffer(this.target) : null === t._glState.scenePassIndex && t._bindFrameBuffer(null), this._setPerspectiveMatrix(), this._setMVMatrix()), (this.alwaysDraw || this._shouldDraw) && this.visible)) {\n    t._setDepth(this._depthTest), t._setFaceCulling(this.cullFace), t._useProgram(this._usedProgram), this._updateUniforms(), (t._glState.currentBuffersID !== this._definition.buffersID || this.target) && this._bindPlaneBuffers();\n\n    for (var i = 0; i < this.textures.length; i++) this.textures[i]._drawTexture();\n\n    e.drawArrays(e.TRIANGLES, 0, this._geometry.bufferInfos.numberOfItems), this._onAfterRenderCallback && this._onAfterRenderCallback();\n  }\n}, Curtains.BasePlane.prototype._dispose = function () {\n  var t = this._curtains.gl;\n\n  if (t) {\n    this._vao && (this._curtains._isWebGL2 ? t.deleteVertexArray(this._vao) : this._curtains._extensions.OES_vertex_array_object.deleteVertexArrayOES(this._vao)), this._geometry && (t.bindBuffer(t.ARRAY_BUFFER, this._geometry.bufferInfos.id), t.bufferData(t.ARRAY_BUFFER, 1, t.STATIC_DRAW), t.deleteBuffer(this._geometry.bufferInfos.id), this._geometry = null), this._material && (t.bindBuffer(t.ARRAY_BUFFER, this._material.bufferInfos.id), t.bufferData(t.ARRAY_BUFFER, 1, t.STATIC_DRAW), t.deleteBuffer(this._material.bufferInfos.id), this._material = null), this.target && \"ShaderPass\" === this._type && (this._curtains.removeRenderTarget(this.target), this.textures.shift());\n\n    for (var e = 0; e < this.textures.length; e++) this.textures[e]._dispose();\n\n    this.textures = null;\n  }\n}, Curtains.BasePlane.prototype.onAfterResize = function (t) {\n  return t && (this._onAfterResizeCallback = t), this;\n}, Curtains.BasePlane.prototype.onLoading = function (t) {\n  return t && (this._onPlaneLoadingCallback = t), this;\n}, Curtains.BasePlane.prototype.onReady = function (t) {\n  return t && (this._onReadyCallback = t), this;\n}, Curtains.BasePlane.prototype.onRender = function (t) {\n  return t && (this._onRenderCallback = t), this;\n}, Curtains.BasePlane.prototype.onAfterRender = function (t) {\n  return t && (this._onAfterRenderCallback = t), this;\n}, Curtains.Plane = function (t, e, i) {\n  this._type = \"Plane\", Curtains.BasePlane.call(this, t, e, i), this.index = this._curtains.planes.length, this._canDraw = !1, this.target = null, i || (i = {}), this._setInitParams(i), this._usedProgram ? (this._curtains._stackPlane(this), this._initPositions(), this._initSources()) : this._curtains._onErrorCallback && this._curtains._onErrorCallback();\n}, Curtains.Plane.prototype = Object.create(Curtains.BasePlane.prototype), Curtains.Plane.prototype.constructor = Curtains.Plane, Curtains.Plane.prototype._setInitParams = function (t) {\n  this.alwaysDraw = t.alwaysDraw || !1, this._transparent = t.transparent || !1;\n  var e = {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n  t.drawCheckMargins && (e = t.drawCheckMargins), this.drawCheckMargins = e, this._initTransformValues(), this.autoloadSources = t.autoloadSources, null !== this.autoloadSources && void 0 !== this.autoloadSources || (this.autoloadSources = !0), this._fov = t.fov || 50, this._nearPlane = .1, this._farPlane = 150, null === t.watchScroll || void 0 === t.watchScroll ? this.watchScroll = this._curtains._watchScroll : this.watchScroll = t.watchScroll || !1, this.watchScroll && (this._curtains._scrollManager.shouldWatch = !0);\n}, Curtains.Plane.prototype._initTransformValues = function () {\n  this.rotation = {\n    x: 0,\n    y: 0,\n    z: 0\n  }, this.quaternion = new Float32Array([0, 0, 0, 1]), this.relativeTranslation = {\n    x: 0,\n    y: 0,\n    z: 0\n  }, this._translation = {\n    x: 0,\n    y: 0,\n    z: 0\n  }, this.scale = {\n    x: 1,\n    y: 1\n  }, this.transformOrigin = {\n    x: .5,\n    y: .5,\n    z: 0\n  };\n}, Curtains.Plane.prototype._initPositions = function () {\n  this._initMatrices(), this.setPerspective(this._fov, this._nearPlane, this._farPlane), this._applyWorldPositions();\n}, Curtains.Plane.prototype._initSources = function () {\n  if (this.autoloadSources) {\n    for (var t = [], e = 0; e < this.htmlElement.getElementsByTagName(\"img\").length; e++) t.push(this.htmlElement.getElementsByTagName(\"img\")[e]);\n\n    t.length > 0 && this.loadSources(t);\n    var i = [];\n\n    for (e = 0; e < this.htmlElement.getElementsByTagName(\"video\").length; e++) i.push(this.htmlElement.getElementsByTagName(\"video\")[e]);\n\n    i.length > 0 && this.loadSources(i);\n    var s = [];\n\n    for (e = 0; e < this.htmlElement.getElementsByTagName(\"canvas\").length; e++) s.push(this.htmlElement.getElementsByTagName(\"canvas\")[e]);\n\n    s.length > 0 && this.loadSources(s), this._loadingManager.initSourcesToLoad = t.length + i.length + s.length;\n  }\n\n  0 === this._loadingManager.initSourcesToLoad && (this._isPlaneReady(), this._curtains.productionMode || console.warn(\"This plane does not contain any image, video or canvas element. You may want to add some later with the loadSource() or loadSources() method.\")), this._canDraw = !0, this._curtains.needRender(), this.alwaysDraw || this._shouldDrawCheck();\n}, Curtains.Plane.prototype._initMatrices = function () {\n  var t = this._curtains.gl;\n  this._matrices = {\n    mvMatrix: {\n      name: \"uMVMatrix\",\n      matrix: new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),\n      location: t.getUniformLocation(this._usedProgram.program, \"uMVMatrix\")\n    },\n    pMatrix: {\n      name: \"uPMatrix\",\n      matrix: new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),\n      location: t.getUniformLocation(this._usedProgram.program, \"uPMatrix\")\n    }\n  };\n}, Curtains.Plane.prototype.resetPlane = function (t) {\n  this._initTransformValues(), null !== t && t ? (this.htmlElement = t, this.updatePosition()) : t || this._curtains.productionMode || console.warn(\"You are trying to reset a plane with a HTML element that does not exist. The old HTML element will be kept instead.\");\n}, Curtains.Plane.prototype._setWorldSizes = function () {\n  var t = this._curtains,\n      e = this._boundingRect.document.width / 2 + this._boundingRect.document.left,\n      i = this._boundingRect.document.height / 2 + this._boundingRect.document.top,\n      s = t._boundingRect.width / 2 + t._boundingRect.left,\n      r = t._boundingRect.height / 2 + t._boundingRect.top;\n  this._boundingRect.world = {\n    width: this._boundingRect.document.width / t._boundingRect.width,\n    height: this._boundingRect.document.height / t._boundingRect.height,\n    top: (r - i) / t._boundingRect.height,\n    left: (e - s) / t._boundingRect.height\n  }, this._boundingRect.world.scale = {\n    x: this._curtains._boundingRect.width / this._curtains._boundingRect.height * this._boundingRect.world.width / 2,\n    y: this._boundingRect.world.height / 2\n  };\n}, Curtains.Plane.prototype._setPerspectiveMatrix = function () {\n  if (this._updatePerspectiveMatrix) {\n    var t = this._curtains._boundingRect.width / this._curtains._boundingRect.height,\n        e = this._nearPlane * Math.tan(Math.PI / 180 * .5 * this._fov),\n        i = 2 * e,\n        s = t * i,\n        r = -.5 * s,\n        a = r + s,\n        n = e - i,\n        o = 2 * this._nearPlane / (a - r),\n        h = 2 * this._nearPlane / (e - n),\n        u = (a + r) / (a - r),\n        l = (e + n) / (e - n),\n        _ = -(this._farPlane + this._nearPlane) / (this._farPlane - this._nearPlane),\n        c = -2 * this._farPlane * this._nearPlane / (this._farPlane - this._nearPlane);\n\n    this._matrices.pMatrix.matrix = new Float32Array([o, 0, 0, 0, 0, h, 0, 0, u, l, _, -1, 0, 0, c, 0]);\n  }\n\n  (this.shareProgram || !this.shareProgram && this._updatePerspectiveMatrix) && (this._curtains._useProgram(this._usedProgram), this._curtains.gl.uniformMatrix4fv(this._matrices.pMatrix.location, !1, this._matrices.pMatrix.matrix)), this._updatePerspectiveMatrix = !1;\n}, Curtains.Plane.prototype.setPerspective = function (t, e, i) {\n  var s = isNaN(t) ? this._fov : parseFloat(t);\n  (s = Math.max(1, Math.min(s, 179))) !== this._fov && (this._fov = s), this._cameraZPosition = 2 * Math.tan(Math.PI / 180 * .5 * this._fov), this._CSSPerspective = Math.pow(Math.pow(this._curtains._boundingRect.width / (2 * this._curtains.pixelRatio), 2) + Math.pow(this._curtains._boundingRect.height / (2 * this._curtains.pixelRatio), 2), .5) / Math.tan(this._fov / 2 * Math.PI / 180), this._nearPlane = isNaN(e) ? this._nearPlane : parseFloat(e), this._nearPlane = Math.max(this._nearPlane, .01), this._farPlane = isNaN(i) ? this._farPlane : parseFloat(i), this._farPlane = Math.max(this._farPlane, 50), this._updatePerspectiveMatrix = !0, this._updateMVMatrix = !0;\n}, Curtains.Plane.prototype._setMVMatrix = function () {\n  if (this._updateMVMatrix) {\n    this._translation.z = this.relativeTranslation.z / this._CSSPerspective;\n\n    var t = {\n      x: this._translation.x,\n      y: this._translation.y,\n      z: -(1 - this._translation.z) / this._cameraZPosition\n    },\n        e = {\n      x: 2 * this.transformOrigin.x - 1,\n      y: -(2 * this.transformOrigin.y - 1)\n    },\n        i = {\n      x: e.x * this._boundingRect.world.scale.x,\n      y: e.y * this._boundingRect.world.scale.y,\n      z: this.transformOrigin.z\n    },\n        s = this._curtains._composeMatrixFromOrigin(t, this.quaternion, this.scale, i),\n        r = new Float32Array([this._boundingRect.world.scale.x, 0, 0, 0, 0, this._boundingRect.world.scale.y, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n\n    this._matrices.mvMatrix.matrix = this._curtains._multiplyMatrix(s, r), this._matrices.mVPMatrix = this._curtains._multiplyMatrix(this._matrices.pMatrix.matrix, this._matrices.mvMatrix.matrix), this.alwaysDraw || this._shouldDrawCheck();\n  }\n\n  (this.shareProgram || !this.shareProgram && this._updateMVMatrix) && (this._curtains._useProgram(this._usedProgram), this._curtains.gl.uniformMatrix4fv(this._matrices.mvMatrix.location, !1, this._matrices.mvMatrix.matrix)), this._updateMVMatrix = !1;\n}, Curtains.Plane.prototype.setScale = function (t, e) {\n  if (t = isNaN(t) ? this.scale.x : parseFloat(t), e = isNaN(e) ? this.scale.y : parseFloat(e), t = Math.max(t, .001), e = Math.max(e, .001), t !== this.scale.x || e !== this.scale.y) {\n    this.scale = {\n      x: t,\n      y: e\n    };\n\n    for (var i = 0; i < this.textures.length; i++) this.textures[i].resize();\n\n    this._updateMVMatrix = !0;\n  }\n}, Curtains.Plane.prototype.setRotation = function (t, e, i) {\n  t = isNaN(t) ? this.rotation.x : parseFloat(t), e = isNaN(e) ? this.rotation.y : parseFloat(e), i = isNaN(i) ? this.rotation.z : parseFloat(i), t === this.rotation.x && e === this.rotation.y && i === this.rotation.z || (this.rotation = {\n    x: t,\n    y: e,\n    z: i\n  }, this._setQuaternion(), this._updateMVMatrix = !0);\n}, Curtains.Plane.prototype._setQuaternion = function () {\n  var t = .5 * this.rotation.x,\n      e = .5 * this.rotation.y,\n      i = .5 * this.rotation.z,\n      s = Math.sin(t),\n      r = Math.cos(t),\n      a = Math.sin(e),\n      n = Math.cos(e),\n      o = Math.sin(i),\n      h = Math.cos(i);\n  this.quaternion[0] = s * n * h + r * a * o, this.quaternion[1] = r * a * h - s * n * o, this.quaternion[2] = r * n * o + s * a * h, this.quaternion[3] = r * n * h - s * a * o;\n}, Curtains.Plane.prototype.setTransformOrigin = function (t, e, i) {\n  t = isNaN(t) ? this.transformOrigin.x : parseFloat(t), e = isNaN(e) ? this.transformOrigin.y : parseFloat(e), i = isNaN(i) ? this.transformOrigin.z : parseFloat(i), t === this.transformOrigin.x && e === this.transformOrigin.y && i === this.transformOrigin.z || (this.transformOrigin = {\n    x: t,\n    y: e,\n    z: i\n  }, this._updateMVMatrix = !0);\n}, Curtains.Plane.prototype._setTranslation = function () {\n  var t = {\n    x: 0,\n    y: 0,\n    z: 0\n  };\n  0 === this.relativeTranslation.x && 0 === this.relativeTranslation.y && 0 === this.relativeTranslation.z || (t = this._documentToLocalSpace(this.relativeTranslation.x, this.relativeTranslation.y)), this._translation.x = this._boundingRect.world.left + t.x, this._translation.y = this._boundingRect.world.top + t.y, this._updateMVMatrix = !0;\n}, Curtains.Plane.prototype.setRelativePosition = function (t, e, i) {\n  t = isNaN(t) ? this.relativeTranslation.x : parseFloat(t), e = isNaN(e) ? this.relativeTranslation.y : parseFloat(e), i = isNaN(i) ? this.relativeTranslation.z : parseFloat(i), t === this.relativeTranslation.x && e === this.relativeTranslation.y && i === this.relativeTranslation.z || (this.relativeTranslation = {\n    x: t,\n    y: e,\n    z: i\n  }, this._setTranslation());\n}, Curtains.Plane.prototype._documentToLocalSpace = function (t, e) {\n  return {\n    x: t / (this._curtains._boundingRect.width / this._curtains.pixelRatio) * (this._curtains._boundingRect.width / this._curtains._boundingRect.height),\n    y: -e / (this._curtains._boundingRect.height / this._curtains.pixelRatio)\n  };\n}, Curtains.Plane.prototype._shouldDrawCheck = function () {\n  var t = this._getWebGLDrawRect(),\n      e = this;\n\n  Math.round(t.right) <= this._curtains._boundingRect.left || Math.round(t.left) >= this._curtains._boundingRect.left + this._curtains._boundingRect.width || Math.round(t.bottom) <= this._curtains._boundingRect.top || Math.round(t.top) >= this._curtains._boundingRect.top + this._curtains._boundingRect.height ? this._shouldDraw && (this._shouldDraw = !1, setTimeout(function () {\n    e._onLeaveViewCallback && e._onLeaveViewCallback();\n  }, 0)) : (this._shouldDraw || setTimeout(function () {\n    e._onReEnterViewCallback && e._onReEnterViewCallback();\n  }, 0), this._shouldDraw = !0);\n}, Curtains.Plane.prototype.isDrawn = function () {\n  return this._canDraw && this.visible && (this._shouldDraw || this.alwaysDraw);\n}, Curtains.Plane.prototype._applyWorldPositions = function () {\n  this._setWorldSizes(), this._setTranslation();\n}, Curtains.Plane.prototype.updatePosition = function () {\n  this._setDocumentSizes(), this._applyWorldPositions();\n}, Curtains.Plane.prototype.updateScrollPosition = function () {\n  (this._curtains._scrollManager.lastXDelta || this._curtains._scrollManager.lastYDelta) && (this._boundingRect.document.top += this._curtains._scrollManager.lastYDelta * this._curtains.pixelRatio, this._boundingRect.document.left += this._curtains._scrollManager.lastXDelta * this._curtains.pixelRatio, this._applyWorldPositions());\n}, Curtains.Plane.prototype.enableDepthTest = function (t) {\n  this._depthTest = t;\n}, Curtains.Plane.prototype.moveToFront = function () {\n  this.enableDepthTest(!1);\n\n  for (var t = this._transparent ? \"transparent\" : \"opaque\", e = this._curtains._drawStacks[t].programs[\"program-\" + this._usedProgram.id], i = 0; i < e.length; i++) this.index === e[i] && e.splice(i, 1);\n\n  \"transparent\" === t ? e.unshift(this.index) : e.push(this.index), this._curtains._drawStacks[t].programs[\"program-\" + this._usedProgram.id] = e;\n\n  for (i = 0; i < this._curtains._drawStacks[t].order.length; i++) this._curtains._drawStacks[t].order[i] === this._usedProgram.id && this._curtains._drawStacks[t].order.splice(i, 1);\n\n  this._curtains._drawStacks[t].order.push(this._usedProgram.id);\n}, Curtains.Plane.prototype.onReEnterView = function (t) {\n  return t && (this._onReEnterViewCallback = t), this;\n}, Curtains.Plane.prototype.onLeaveView = function (t) {\n  return t && (this._onLeaveViewCallback = t), this;\n}, Curtains.RenderTarget = function (t, e) {\n  e || (e = {}), this._curtains = t, this.index = this._curtains.renderTargets.length, this._type = \"RenderTarget\", this._shaderPass = e.shaderPass || null, this._depth = e.depth || !1, this._shouldClear = e.clear, null !== this._shouldClear && void 0 !== this._shouldClear || (this._shouldClear = !0), this._minSize = {\n    width: e.minWidth || 1024 * this._curtains.pixelRatio,\n    height: e.minHeight || 1024 * this._curtains.pixelRatio\n  }, this.userData = {}, this.uuid = this._curtains._generateUUID(), this._curtains.renderTargets.push(this), this._initRenderTarget();\n}, Curtains.RenderTarget.prototype._initRenderTarget = function () {\n  this._setSize(), this.textures = [], this._createFrameBuffer();\n}, Curtains.RenderTarget.prototype._setSize = function () {\n  this._shaderPass && this._shaderPass._isScenePass ? this._size = {\n    width: this._curtains._boundingRect.width,\n    height: this._curtains._boundingRect.height\n  } : this._size = {\n    width: Math.max(this._minSize.width, this._curtains._boundingRect.width),\n    height: Math.max(this._minSize.height, this._curtains._boundingRect.height)\n  };\n}, Curtains.RenderTarget.prototype.resize = function () {\n  this._shaderPass && this._shaderPass._isScenePass && (this._setSize(), this._curtains._bindFrameBuffer(this, !0), this._depth && this._bindDepthBuffer(), this._curtains._bindFrameBuffer(null));\n}, Curtains.RenderTarget.prototype._bindDepthBuffer = function () {\n  var t = this._curtains.gl;\n  this._depthBuffer && (t.bindRenderbuffer(t.RENDERBUFFER, this._depthBuffer), t.renderbufferStorage(t.RENDERBUFFER, t.DEPTH_COMPONENT16, this._size.width, this._size.height), t.framebufferRenderbuffer(t.FRAMEBUFFER, t.DEPTH_ATTACHMENT, t.RENDERBUFFER, this._depthBuffer));\n}, Curtains.RenderTarget.prototype._createFBOTexture = function () {\n  var t = this._curtains.gl;\n  if (this.textures.length > 0) this.textures[0]._canDraw = !1, this.textures[0]._init();else {\n    var e = new Curtains.Texture(this._shaderPass ? this._shaderPass : this, {\n      index: this.textures.length,\n      sampler: \"uRenderTexture\",\n      isFBOTexture: !0\n    });\n    this.textures.push(e);\n  }\n  t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, this.textures[0]._sampler.texture, 0);\n}, Curtains.RenderTarget.prototype._createFrameBuffer = function () {\n  var t = this._curtains.gl;\n  this._frameBuffer = t.createFramebuffer(), this._curtains._bindFrameBuffer(this, !0), this._createFBOTexture(), this._depth && (this._depthBuffer = t.createRenderbuffer(), this._bindDepthBuffer()), this._curtains._bindFrameBuffer(null);\n}, Curtains.RenderTarget.prototype._restoreContext = function () {\n  this._shaderPass && this._shaderPass._isScenePass || (this._shaderPass = null, this._createFrameBuffer());\n}, Curtains.RenderTarget.prototype._dispose = function () {\n  this._frameBuffer && (this._curtains.gl.deleteFramebuffer(this._frameBuffer), this._frameBuffer = null), this._depthBuffer && (this._curtains.gl.deleteRenderbuffer(this._depthBuffer), this._depthBuffer = null), this.textures[0]._dispose(), this.textures = [];\n}, Curtains.ShaderPass = function (t, e) {\n  e || (e = {}), e.widthSegments = 1, e.heightSegments = 1, this._type = \"ShaderPass\", this._isScenePass = !0, Curtains.BasePlane.call(this, t, t.container, e), this.index = this._curtains.shaderPasses.length, this._depth = e.depth || !1, this._shouldClear = e.clear, null !== this._shouldClear && void 0 !== this._shouldClear || (this._shouldClear = !0), this.target = e.renderTarget || null, this.target && (this._isScenePass = !1, this._shouldClear = this.target._shouldClear), this._usedProgram && this._initShaderPassPlane();\n}, Curtains.ShaderPass.prototype = Object.create(Curtains.BasePlane.prototype), Curtains.ShaderPass.prototype.constructor = Curtains.ShaderPass, Curtains.ShaderPass.prototype._initShaderPassPlane = function () {\n  if (this.target) {\n    this.setRenderTarget(this.target), this.target._shaderPass = this;\n    var t = new Curtains.Texture(this, {\n      index: this.textures.length,\n      sampler: \"uRenderTexture\",\n      isFBOTexture: !0,\n      fromTexture: this.target.textures[0]\n    });\n    this.textures.push(t);\n  } else this._createFrameBuffer();\n\n  this._isPlaneReady(), this._canDraw = !0, this._curtains.needRender();\n}, Curtains.ShaderPass.prototype._getDefaultVS = function (t) {\n  return \"precision mediump float;\\nattribute vec3 aVertexPosition;attribute vec2 aTextureCoord;varying vec3 vVertexPosition;varying vec2 vTextureCoord;void main() {vTextureCoord = aTextureCoord;vVertexPosition = aVertexPosition;gl_Position = vec4(aVertexPosition, 1.0);}\";\n}, Curtains.ShaderPass.prototype._getDefaultFS = function (t) {\n  return \"precision mediump float;\\nvarying vec3 vVertexPosition;varying vec2 vTextureCoord;uniform sampler2D uRenderTexture;void main( void ) {gl_FragColor = texture2D(uRenderTexture, vTextureCoord);}\";\n}, Curtains.ShaderPass.prototype._createFrameBuffer = function () {\n  var t = new Curtains.RenderTarget(this._curtains, {\n    shaderPass: this,\n    clear: this._shouldClear,\n    depth: this._depth\n  });\n  this.setRenderTarget(t), this.textures.push(this.target.textures[0]);\n}, Curtains.Texture = function (t, e) {\n  if (this._parent = t, this._curtains = t._curtains, this.uuid = this._curtains._generateUUID(), t._usedProgram || e.isFBOTexture) return this.index = t.textures.length, this._sampler = {\n    isActive: !1,\n    name: e.sampler || \"uSampler\" + this.index\n  }, this._textureMatrix = {\n    name: e.sampler ? e.sampler + \"Matrix\" : \"uTextureMatrix\" + this.index,\n    matrix: null\n  }, this._willUpdate = !1, this.shouldUpdate = !1, this._forceUpdate = !1, this.scale = {\n    x: 1,\n    y: 1\n  }, this.userData = {}, this.type = e.isFBOTexture ? \"fboTexture\" : \"empty\", this._canDraw = !1, e.fromTexture ? (this._initFromTexture = !0, this._parent._usedProgram && this._setTextureUniforms(), void this.setFromTexture(e.fromTexture)) : (this._initFromTexture = !1, this._init(), this);\n  this._curtains.productionMode || console.warn(\"Unable to create the texture because the program is not valid\");\n}, Curtains.Texture.prototype._init = function () {\n  var t = this._curtains.gl;\n\n  if (this._sampler.texture = t.createTexture(), this._internalFormat = t.RGBA, this._format = t.RGBA, this._textureType = t.UNSIGNED_BYTE, this._texParameters = !1, this._flipY = !1, t.bindTexture(t.TEXTURE_2D, this._sampler.texture), this._curtains._glState.flipY && (this._curtains._glState.flipY = this._flipY, t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL, this._flipY)), t.pixelStorei(t.UNPACK_ALIGNMENT, 4), t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !1), this._parent._usedProgram) {\n    if (this._size = {\n      width: this._parent._boundingRect.document.width,\n      height: this._parent._boundingRect.document.height\n    }, this._setTextureUniforms(), \"empty\" === this.type) t.texImage2D(t.TEXTURE_2D, 0, this._internalFormat, 1, 1, 0, this._format, this._textureType, new Uint8Array([0, 0, 0, 255])), this._sourceLoaded = !1;else if (!this.source) {\n      var e = this._getSizes();\n\n      this._updateTextureMatrix(e);\n    }\n  } else this._size = {\n    width: this._parent._size.width || this._curtains._boundingRect.width,\n    height: this._parent._size.height || this._curtains._boundingRect.height\n  };\n\n  \"fboTexture\" === this.type && (this._curtains._isWebGL2 && this._curtains._extensions.EXT_color_buffer_float ? (this._internalFormat = t.RGBA16F, this._textureType = t.HALF_FLOAT) : this._curtains._extensions.OES_texture_half_float && (this._textureType = this._curtains._extensions.OES_texture_half_float.HALF_FLOAT_OES), t.texImage2D(t.TEXTURE_2D, 0, this._internalFormat, this._size.width, this._size.height, 0, this._format, this._textureType, null), this._setMipmaps()), this._canDraw = !0;\n}, Curtains.Texture.prototype._setTextureUniforms = function () {\n  for (var t = 0; t < this._parent._activeTextures.length; t++) this._parent._activeTextures[t].name === this._sampler.name && (this._sampler.isActive = !0, this._sampler.location = this._curtains.gl.getUniformLocation(this._parent._usedProgram.program, this._sampler.name), this._textureMatrix.location = this._curtains.gl.getUniformLocation(this._parent._usedProgram.program, this._textureMatrix.name), this._curtains._useProgram(this._parent._usedProgram), this._curtains.gl.uniform1i(this._sampler.location, this.index));\n}, Curtains.Texture.prototype.setFromTexture = function (t) {\n  if (t) {\n    if (this.type = t.type, this._sampler.texture = t._sampler.texture, this.source = t.source, this._size = t._size, this._sourceLoaded = t._sourceLoaded, this._internalFormat = t._internalFormat, this._format = t._format, this._textureType = t._textureType, this._texParameters = t._texParameters, this._originalTexture = t, this._parent._usedProgram && (!this._canDraw || !this._textureMatrix.matrix)) {\n      var e = this._getSizes();\n\n      this._updateTextureMatrix(e), this._canDraw = !0;\n    }\n  } else this._curtains.productionMode || console.warn(\"Unable to set the texture from texture:\", t);\n}, Curtains.Texture.prototype.setSource = function (t) {\n  if (this._parent._usedProgram) {\n    this.source = t, \"empty\" === this.type && (\"IMG\" === t.tagName.toUpperCase() ? this.type = \"image\" : \"VIDEO\" === t.tagName.toUpperCase() ? (this.type = \"video\", this.shouldUpdate = !0) : \"CANVAS\" === t.tagName.toUpperCase() ? (this.type = \"canvas\", this._willUpdate = !0, this.shouldUpdate = !0) : this._curtains.productionMode || console.warn(\"this HTML tag could not be converted into a texture:\", t.tagName)), this._size = {\n      width: this.source.naturalWidth || this.source.width || this.source.videoWidth,\n      height: this.source.naturalHeight || this.source.height || this.source.videoHeight\n    }, this._sourceLoaded = !0;\n    var e = this._curtains.gl;\n    e.activeTexture(e.TEXTURE0 + this.index), e.bindTexture(e.TEXTURE_2D, this._sampler.texture), this._curtains.premultipliedAlpha && e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !0), this._flipY = !0, this._curtains._glState.flipY || (this._curtains._glState.flipY = this._flipY, e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, this._flipY)), this.resize(), \"image\" === this.type && (e.texImage2D(e.TEXTURE_2D, 0, this._internalFormat, this._format, this._textureType, t), this._setMipmaps()), this._curtains.needRender();\n  } else this._curtains.productionMode || console.warn(\"Unable to set the texture source because the program is not valid\");\n}, Curtains.Texture.prototype._setMipmaps = function () {\n  var t = this._curtains.gl;\n  t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), this._curtains._isWebGL2 && \"image\" === this.type ? (t.generateMipmap(t.TEXTURE_2D), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR_MIPMAP_NEAREST)) : t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), this._texParameters = !0;\n}, Curtains.Texture.prototype.needUpdate = function () {\n  this._forceUpdate = !0;\n}, Curtains.Texture.prototype._update = function () {\n  var t = this._curtains.gl;\n  this.source ? (t.texImage2D(t.TEXTURE_2D, 0, this._internalFormat, this._format, this._textureType, this.source), this._texParameters || this._setMipmaps()) : t.texImage2D(t.TEXTURE_2D, 0, this._internalFormat, this._size.width, this._size.height, 0, this._format, this._textureType, this.source);\n}, Curtains.Texture.prototype._getSizes = function () {\n  var t = this._parent.scale ? this._parent.scale : {\n    x: 1,\n    y: 1\n  },\n      e = this._parent._boundingRect.document.width * t.x,\n      i = this._parent._boundingRect.document.height * t.y,\n      s = this._size.width,\n      r = this._size.height,\n      a = s / r,\n      n = e / i,\n      o = 0,\n      h = 0;\n  return n > a ? h = Math.min(0, i - e * (1 / a)) : n < a && (o = Math.min(0, e - i * a)), {\n    parentWidth: e,\n    parentHeight: i,\n    sourceWidth: s,\n    sourceHeight: r,\n    xOffset: o,\n    yOffset: h\n  };\n}, Curtains.Texture.prototype.setScale = function (t, e) {\n  t = isNaN(t) ? this.scale.x : parseFloat(t), e = isNaN(e) ? this.scale.y : parseFloat(e), t = Math.max(t, .001), e = Math.max(e, .001), t === this.scale.x && e === this.scale.y || (this.scale = {\n    x: t,\n    y: e\n  }, this.resize());\n}, Curtains.Texture.prototype.resize = function () {\n  if (\"fboTexture\" === this.type) {\n    var t = this._curtains.gl;\n    this._size = {\n      width: this._parent._boundingRect.document.width,\n      height: this._parent._boundingRect.document.height\n    }, this._originalTexture || (t.bindTexture(t.TEXTURE_2D, this._parent.textures[0]._sampler.texture), t.texImage2D(t.TEXTURE_2D, 0, this._internalFormat, this._size.width, this._size.height, 0, this._format, this._textureType, this.source));\n  } else this.source && (this._size = {\n    width: this.source.naturalWidth || this.source.width || this.source.videoWidth,\n    height: this.source.naturalHeight || this.source.height || this.source.videoHeight\n  });\n\n  if (this._parent._usedProgram) {\n    var e = this._getSizes();\n\n    this._updateTextureMatrix(e);\n  }\n}, Curtains.Texture.prototype._updateTextureMatrix = function (t) {\n  var e = {\n    x: t.parentWidth / (t.parentWidth - t.xOffset),\n    y: t.parentHeight / (t.parentHeight - t.yOffset)\n  };\n  e.x /= this.scale.x, e.y /= this.scale.y;\n  var i = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, (1 - e.x) / 2, (1 - e.y) / 2, 0, 1]);\n  this._textureMatrix.matrix = this._curtains._scaleMatrix(i, e.x, e.y, 1), this._curtains._useProgram(this._parent._usedProgram), this._curtains.gl.uniformMatrix4fv(this._textureMatrix.location, !1, this._textureMatrix.matrix);\n}, Curtains.Texture.prototype._onSourceLoaded = function (t) {\n  this._parent._loadingManager.sourcesLoaded++;\n  var e = this;\n\n  if (this._sourceLoaded || setTimeout(function () {\n    e._parent._onPlaneLoadingCallback && e._parent._onPlaneLoadingCallback(e);\n  }, 0), this.setSource(t), this._parent._isPlaneReady(), \"image\" === this.type) {\n    for (var i = !0, s = 0; s < this._curtains._imageCache.length; s++) this._curtains._imageCache[s].source && this._curtains._imageCache[s].source.src === t.src && (i = !1);\n\n    i && this._curtains._imageCache.push(this);\n  }\n}, Curtains.Texture.prototype._onVideoLoadedData = function (t) {\n  this._sourceLoaded || this._onSourceLoaded(t);\n}, Curtains.Texture.prototype._drawTexture = function () {\n  this._sampler.isActive && (this._parent._bindPlaneTexture(this), this._flipY && !this._curtains._glState.flipY && (this._curtains._glState.flipY = this._flipY, this._curtains.gl.pixelStorei(this._curtains.gl.UNPACK_FLIP_Y_WEBGL, this._flipY)), \"video\" === this.type && this.source && this.source.readyState >= this.source.HAVE_CURRENT_DATA && (this._willUpdate = !0), (this._forceUpdate || this._willUpdate && this.shouldUpdate) && this._update(), \"video\" === this.type && (this._willUpdate = !1), this._forceUpdate = !1);\n}, Curtains.Texture.prototype._restoreFromTexture = function () {\n  this._initFromTexture ? this._setTextureUniforms() : this._init(), this.setFromTexture(this._originalTexture);\n}, Curtains.Texture.prototype._restoreContext = function () {\n  if (this._canDraw = !1, this._sampler.isActive = !1, this._originalTexture) {\n    var t = this;\n    if (this._originalTexture._canDraw) setTimeout(function () {\n      t._restoreFromTexture();\n    }, 0);else var e = setInterval(function () {\n      t._originalTexture._canDraw && (t._restoreFromTexture(), clearInterval(e));\n    }, 16);\n  } else this._init(), this.source && (\"image\" === this.type && this._curtains._imageCache.push(this), this.setSource(this.source), this.needUpdate());\n}, Curtains.Texture.prototype._dispose = function () {\n  \"video\" === this.type ? (this.source.removeEventListener(\"canplaythrough\", this._onSourceLoadedHandler, !1), this.source.removeEventListener(\"error\", this._parent._sourceLoadError, !1), this.source.pause(), this.source.removeAttribute(\"src\"), this.source.load(), this.source = null) : \"canvas\" === this.type ? (this.source.width = this.source.width, this.source = null) : \"image\" === this.type && this._curtains._isDestroying && (this.source.removeEventListener(\"load\", this._onSourceLoadedHandler, !1), this.source.removeEventListener(\"error\", this._parent._sourceLoadError, !1), this.source = null);\n  var t = this._curtains.gl;\n  t && !this._originalTexture && (\"image\" !== this.type || this._curtains._isDestroying) && (t.activeTexture(t.TEXTURE0 + this.index), t.bindTexture(t.TEXTURE_2D, null), t.deleteTexture(this._sampler.texture)), this._parent._loadingManager && this._parent._loadingManager.sourcesLoaded--;\n};\nmodule.exports = {\n  Curtains\n};","map":{"version":3,"sources":["/Users/uthaya/ourjourneys/node_modules/curtainsjs/libs/curtains.min.js"],"names":["Curtains","t","e","planes","renderTargets","shaderPasses","_imageCache","_drawStacks","opaque","length","programs","order","transparent","renderPasses","scenePasses","_drawingEnabled","_forceRender","console","warn","container","document","getElementById","Element","createElement","setAttribute","body","appendChild","_autoResize","autoResize","_autoRender","autoRender","_watchScroll","watchScroll","pixelRatio","window","devicePixelRatio","renderingScale","isNaN","parseFloat","_renderingScale","Math","max","min","premultipliedAlpha","alpha","antialias","productionMode","production","_onErrorCallback","_init","prototype","glCanvas","gl","getContext","_isWebGL2","_getExtensions","_glState","currentProgramID","currentBuffersID","setDepth","frameBufferID","scenePassIndex","cullFace","flipY","_contextLostHandler","_contextLost","bind","addEventListener","_contextRestoredHandler","_contextRestored","_scrollManager","handler","_scroll","shouldWatch","xOffset","pageXOffset","yOffset","pageYOffset","lastXDelta","lastYDelta","passive","setPixelRatio","_resizeHandler","resize","_readyToDraw","_extensions","EXT_color_buffer_float","getExtension","OES_texture_float_linear","WEBGL_lose_context","OES_vertex_array_object","OES_texture_float","OES_texture_half_float","OES_texture_half_float_linear","OES_element_index_uint","OES_standard_derivatives","EXT_sRGB","WEBGL_depth_texture","WEBGL_draw_buffers","_setSize","getBoundingClientRect","_boundingRect","width","height","top","left","navigator","userAgent","match","i","test","MSStream","offsetTop","scrollTop","offsetParent","style","floor","viewport","drawingBufferWidth","drawingBufferHeight","getBoundingRect","_canDraw","planeResize","needRender","setTimeout","_onAfterResizeCallback","x","y","updateScrollValues","updateScrollPosition","_onScrollCallback","s","getScrollDeltas","getScrollValues","enableDrawing","disableDrawing","preventDefault","_animationFrameID","cancelAnimationFrame","_onContextLostCallback","restoreContext","_setBlendFunc","_setDepth","_restoreContext","_onContextRestoredCallback","_animate","dispose","_isDestroying","removePlane","removeShaderPass","removeRenderTarget","deleteProgram","program","setInterval","clearInterval","_clear","removeEventListener","loseContext","removeChild","_createShader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","VERTEX_SHADER","r","getShaderSource","split","a","join","getShaderInfoLog","error","_isEqualShader","localeCompare","_setupProgram","vsCode","fsCode","shareProgram","_useExistingShaders","_createProgram","_type","_useNewShaders","vs","vertexShader","fs","fragmentShader","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","deleteShader","id","type","push","_useProgram","useProgram","addPlane","Plane","_usedProgram","_transparent","_dispose","uuid","splice","index","unshift","_stackPlane","includes","addRenderTarget","RenderTarget","_shaderPass","target","addShaderPass","ShaderPass","renderTarget","_isScenePass","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","_bindFrameBuffer","bindFramebuffer","FRAMEBUFFER","_frameBuffer","_size","_shouldClear","depthTest","enable","DEPTH_TEST","disable","BLEND","blendFuncSeparate","ONE","ONE_MINUS_SRC_ALPHA","SRC_ALPHA","_setFaceCulling","CULL_FACE","FRONT","BACK","_generateUUID","replace","random","toString","toUpperCase","_multiplyMatrix","Float32Array","_scaleMatrix","_composeMatrixFromOrigin","n","o","h","u","l","_","c","d","p","g","f","m","v","P","b","C","T","S","z","w","R","M","E","B","D","F","A","L","_applyMatrixToPoint","log","render","requestAnimationFrame","_drawPlaneStack","_drawPlane","_onRenderCallback","clearDepth","onAfterResize","onError","onContextLost","onContextRestored","onRender","onScroll","BasePlane","_curtains","htmlElement","_initBasePlane","_updatePerspectiveMatrix","_updateMVMatrix","_definition","parseInt","widthSegments","heightSegments","buffersID","_depthTest","_activeTextures","uniforms","name","value","lastValue","_setupShaders","vertexShaderCode","fragmentShaderCode","_loadingManager","sourcesLoaded","initSourcesToLoad","complete","images","videos","canvases","textures","crossOrigin","userData","_shouldDraw","visible","_setAttributes","_setDocumentSizes","_setUniforms","_initializeBuffers","_getDefaultVS","_getDefaultFS","vertexShaderID","getAttribute","fragmentShaderID","innerHTML","_handleUniformSetting","uniform1i","uniform1iv","uniform1f","uniform1fv","uniform2i","uniform2iv","uniform2f","uniform2fv","uniform3i","uniform3iv","uniform3f","uniform3fv","uniform4i","uniform4iv","uniform4f","uniform4fv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv","ACTIVE_UNIFORMS","getActiveUniform","SAMPLER_2D","location","getUniformLocation","Array","isArray","constructor","_updateUniforms","JSON","stringify","_attributes","vertexPosition","getAttribLocation","textureCoord","_setPlaneVertices","_geometry","vertices","_material","uvs","bufferInfos","createBuffer","itemSize","numberOfItems","_vao","createVertexArray","bindVertexArray","createVertexArrayOES","bindVertexArrayOES","enableVertexAttribArray","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","vertexAttribPointer","FLOAT","_matrices","_depthBuffer","_createFrameBuffer","setRenderTarget","_setTextureUniforms","setFromTexture","_initMatrices","setPerspective","_fov","_nearPlane","_farPlane","_applyWorldPositions","right","bottom","_getNearPlaneIntersections","slice","mVPMatrix","_getWorldCoords","abs","getWebGLBoundingRect","_getWebGLDrawRect","drawCheckMargins","createTexture","sampler","Texture","fromTexture","isFBOTexture","_isPlaneReady","_onReadyCallback","loadSources","loadSource","tagName","loadImage","loadVideo","loadCanvas","_sourceLoadError","_getTextureFromCache","source","src","_onSourceLoadedHandler","_onSourceLoaded","decode","then","catch","preload","muted","loop","_onVideoLoadedData","readyState","HAVE_FUTURE_DATA","load","loadImages","loadVideos","loadCanvases","playVideos","play","mouseToPlaneCoords","scale","_bindPlaneBuffers","_bindPlaneTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","_sampler","texture","_setPerspectiveMatrix","_setMVMatrix","alwaysDraw","_drawTexture","drawArrays","TRIANGLES","_onAfterRenderCallback","deleteVertexArray","deleteVertexArrayOES","deleteBuffer","shift","onLoading","_onPlaneLoadingCallback","onReady","onAfterRender","call","_setInitParams","_initPositions","_initSources","Object","create","_initTransformValues","autoloadSources","fov","rotation","quaternion","relativeTranslation","_translation","transformOrigin","getElementsByTagName","_shouldDrawCheck","mvMatrix","matrix","pMatrix","resetPlane","updatePosition","_setWorldSizes","world","tan","PI","_cameraZPosition","_CSSPerspective","pow","setScale","setRotation","_setQuaternion","sin","cos","setTransformOrigin","_setTranslation","_documentToLocalSpace","setRelativePosition","round","_onLeaveViewCallback","_onReEnterViewCallback","isDrawn","enableDepthTest","moveToFront","onReEnterView","onLeaveView","shaderPass","_depth","depth","_minSize","minWidth","minHeight","_initRenderTarget","_bindDepthBuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","_createFBOTexture","framebufferTexture2D","COLOR_ATTACHMENT0","createFramebuffer","createRenderbuffer","deleteFramebuffer","deleteRenderbuffer","_initShaderPassPlane","_parent","isActive","_textureMatrix","_willUpdate","shouldUpdate","_forceUpdate","_initFromTexture","_internalFormat","RGBA","_format","_textureType","UNSIGNED_BYTE","_texParameters","_flipY","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_ALIGNMENT","UNPACK_PREMULTIPLY_ALPHA_WEBGL","texImage2D","Uint8Array","_sourceLoaded","_getSizes","_updateTextureMatrix","RGBA16F","HALF_FLOAT","HALF_FLOAT_OES","_setMipmaps","_originalTexture","setSource","naturalWidth","videoWidth","naturalHeight","videoHeight","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","generateMipmap","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_NEAREST","LINEAR","needUpdate","_update","parentWidth","parentHeight","sourceWidth","sourceHeight","HAVE_CURRENT_DATA","_restoreFromTexture","pause","removeAttribute","deleteTexture","module","exports"],"mappings":"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","sourcesContent":["/***\r\n * curtains.js v6.1.1\r\n * https://www.curtainsjs.com/\r\n *\r\n * @author: Martin Laxenaire\r\n * https://www.martin-laxenaire.fr/\r\n */\r\n\"use strict\";function Curtains(t){var e;(this.planes=[],this.renderTargets=[],this.shaderPasses=[],this._imageCache=[],this._drawStacks={opaque:{length:0,programs:[],order:[]},transparent:{length:0,programs:[],order:[]},renderPasses:[],scenePasses:[]},this._drawingEnabled=!0,this._forceRender=!1,\"string\"==typeof t)&&(console.warn(\"Since v4.0 you should use an object to pass your container and other parameters. Please refer to the docs: https://www.curtainsjs.com/documentation.html\"),t={container:e=t});t.container?\"string\"==typeof t.container?this.container=document.getElementById(t.container):t.container instanceof Element&&(this.container=t.container):((e=document.createElement(\"div\")).setAttribute(\"id\",\"curtains-canvas\"),document.body.appendChild(e),this.container=e);if(this._autoResize=t.autoResize,null!==this._autoResize&&void 0!==this._autoResize||(this._autoResize=!0),this._autoRender=t.autoRender,null!==this._autoRender&&void 0!==this._autoRender||(this._autoRender=!0),this._watchScroll=t.watchScroll,null!==this._watchScroll&&void 0!==this._watchScroll||(this._watchScroll=!0),this.pixelRatio=t.pixelRatio||window.devicePixelRatio||1,t.renderingScale=isNaN(t.renderingScale)?1:parseFloat(t.renderingScale),this._renderingScale=Math.max(.25,Math.min(1,t.renderingScale)),this.premultipliedAlpha=t.premultipliedAlpha||!1,this.alpha=t.alpha,null!==this.alpha&&void 0!==this.alpha||(this.alpha=!0),this.antialias=t.antialias,null!==this.antialias&&void 0!==this.antialias||(this.antialias=!0),this.productionMode=t.production||!1,!this.container)return this.productionMode||console.warn(\"You must specify a valid container ID\"),void(this._onErrorCallback&&this._onErrorCallback());this._init()}Curtains.prototype._init=function(){this.glCanvas=document.createElement(\"canvas\");var t={alpha:this.alpha,premultipliedAlpha:this.premultipliedAlpha,antialias:this.antialias};if(this.gl=this.glCanvas.getContext(\"webgl2\",t),this._isWebGL2=!!this.gl,this.gl||(this.gl=this.glCanvas.getContext(\"webgl\",t)||this.glCanvas.getContext(\"experimental-webgl\",t)),!this.gl)return this.productionMode||console.warn(\"WebGL context could not be created\"),void(this._onErrorCallback&&this._onErrorCallback());this._getExtensions(),this._glState={currentProgramID:null,programs:[],currentBuffersID:0,setDepth:null,frameBufferID:null,scenePassIndex:null,cullFace:null,flipY:null},this._contextLostHandler=this._contextLost.bind(this),this.glCanvas.addEventListener(\"webglcontextlost\",this._contextLostHandler,!1),this._contextRestoredHandler=this._contextRestored.bind(this),this.glCanvas.addEventListener(\"webglcontextrestored\",this._contextRestoredHandler,!1),this._scrollManager={handler:this._scroll.bind(this,!0),shouldWatch:this._watchScroll,xOffset:window.pageXOffset,yOffset:window.pageYOffset,lastXDelta:0,lastYDelta:0},this._watchScroll&&window.addEventListener(\"scroll\",this._scrollManager.handler,{passive:!0}),this.setPixelRatio(this.pixelRatio,!1),this._resizeHandler=null,this._autoResize&&(this._resizeHandler=this.resize.bind(this,!0),window.addEventListener(\"resize\",this._resizeHandler,!1)),this._readyToDraw()},Curtains.prototype._getExtensions=function(){this._extensions=[],this._isWebGL2?(this._extensions.EXT_color_buffer_float=this.gl.getExtension(\"EXT_color_buffer_float\"),this._extensions.OES_texture_float_linear=this.gl.getExtension(\"OES_texture_float_linear\"),this._extensions.WEBGL_lose_context=this.gl.getExtension(\"WEBGL_lose_context\")):(this._extensions.OES_vertex_array_object=this.gl.getExtension(\"OES_vertex_array_object\"),this._extensions.OES_texture_float=this.gl.getExtension(\"OES_texture_float\"),this._extensions.OES_texture_float_linear=this.gl.getExtension(\"OES_texture_float_linear\"),this._extensions.OES_texture_half_float=this.gl.getExtension(\"OES_texture_half_float\"),this._extensions.OES_texture_half_float_linear=this.gl.getExtension(\"OES_texture_half_float_linear\"),this._extensions.OES_element_index_uint=this.gl.getExtension(\"OES_element_index_uint\"),this._extensions.OES_standard_derivatives=this.gl.getExtension(\"OES_standard_derivatives\"),this._extensions.EXT_sRGB=this.gl.getExtension(\"EXT_sRGB\"),this._extensions.WEBGL_depth_texture=this.gl.getExtension(\"WEBGL_depth_texture\"),this._extensions.WEBGL_draw_buffers=this.gl.getExtension(\"WEBGL_draw_buffers\"),this._extensions.WEBGL_lose_context=this.gl.getExtension(\"WEBGL_lose_context\"))},Curtains.prototype.setPixelRatio=function(t,e){this.pixelRatio=parseFloat(Math.max(t,1))||1,this.resize(e)},Curtains.prototype._setSize=function(){var t=this.container.getBoundingClientRect();this._boundingRect={width:t.width*this.pixelRatio,height:t.height*this.pixelRatio,top:t.top*this.pixelRatio,left:t.left*this.pixelRatio};var e=!!navigator.userAgent.match(/Version\\/[\\d\\.]+.*Safari/),i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(e&&i){this._boundingRect.top=function(t){for(var e=0;t&&!isNaN(t.offsetTop);)e+=t.offsetTop-t.scrollTop,t=t.offsetParent;return e}(this.container)*this.pixelRatio}this.glCanvas.style.width=Math.floor(this._boundingRect.width/this.pixelRatio)+\"px\",this.glCanvas.style.height=Math.floor(this._boundingRect.height/this.pixelRatio)+\"px\",this.glCanvas.width=Math.floor(this._boundingRect.width*this._renderingScale),this.glCanvas.height=Math.floor(this._boundingRect.height*this._renderingScale),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight),this._scrollManager.shouldWatch&&(this._scrollManager.xOffset=window.pageXOffset,this._scrollManager.yOffset=window.pageYOffset)},Curtains.prototype.getBoundingRect=function(){return this._boundingRect},Curtains.prototype.resize=function(t){this._setSize();for(var e=0;e<this.planes.length;e++)this.planes[e]._canDraw&&this.planes[e].planeResize();for(e=0;e<this.shaderPasses.length;e++)this.shaderPasses[e]._canDraw&&this.shaderPasses[e].planeResize();for(e=0;e<this.renderTargets.length;e++)this.renderTargets[e].resize();this.needRender();var i=this;setTimeout(function(){i._onAfterResizeCallback&&t&&i._onAfterResizeCallback()},0)},Curtains.prototype._scroll=function(){var t={x:window.pageXOffset,y:window.pageYOffset};if(this.updateScrollValues(t.x,t.y),this._scrollManager.shouldWatch){for(var e=0;e<this.planes.length;e++)this.planes[e].watchScroll&&this.planes[e].updateScrollPosition();this.needRender()}this._onScrollCallback&&this._onScrollCallback()},Curtains.prototype.updateScrollValues=function(t,e){var i=this._scrollManager.xOffset;this._scrollManager.xOffset=t,this._scrollManager.lastXDelta=i-this._scrollManager.xOffset;var s=this._scrollManager.yOffset;this._scrollManager.yOffset=e,this._scrollManager.lastYDelta=s-this._scrollManager.yOffset},Curtains.prototype.getScrollDeltas=function(){return{x:this._scrollManager.lastXDelta,y:this._scrollManager.lastYDelta}},Curtains.prototype.getScrollValues=function(){return{x:this._scrollManager.xOffset,y:this._scrollManager.yOffset}},Curtains.prototype.enableDrawing=function(){this._drawingEnabled=!0},Curtains.prototype.disableDrawing=function(){this._drawingEnabled=!1},Curtains.prototype.needRender=function(){this._forceRender=!0},Curtains.prototype._contextLost=function(t){t.preventDefault(),this._glState={currentProgramID:null,programs:[],currentBuffersID:0,setDepth:null,frameBufferID:null,scenePassIndex:null,cullFace:null,flipY:null},this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID);var e=this;setTimeout(function(){e._onContextLostCallback&&e._onContextLostCallback()},0)},Curtains.prototype.restoreContext=function(){this.gl&&this._extensions.WEBGL_lose_context?this._extensions.WEBGL_lose_context.restoreContext():this.productionMode||(this.gl?this._extensions.WEBGL_lose_context||console.warn(\"Could not restore context because the restore context extension is not defined\"):console.warn(\"Could not restore context because the context is not defined\"))},Curtains.prototype._contextRestored=function(){var t=this._drawingEnabled;this._drawingEnabled=!1,this._getExtensions(),this._setBlendFunc(),this._setDepth(!0),this._drawStacks={opaque:{length:0,programs:[],order:[]},transparent:{length:0,programs:[],order:[]},renderPasses:[],scenePasses:[]},this._imageCache=[];for(var e=0;e<this.renderTargets.length;e++)this.renderTargets[e]._restoreContext();for(e=0;e<this.planes.length;e++)this.planes[e]._restoreContext();for(e=0;e<this.shaderPasses.length;e++)this.shaderPasses[e]._restoreContext();this._onContextRestoredCallback&&this._onContextRestoredCallback(),this._drawingEnabled=t,this.needRender(),this._autoRender&&this._animate()},Curtains.prototype.dispose=function(){for(this._isDestroying=!0;this.planes.length>0;)this.removePlane(this.planes[0]);for(;this.shaderPasses.length>0;)this.removeShaderPass(this.shaderPasses[0]);for(;this.renderTargets.length>0;)this.removeRenderTarget(this.renderTargets[0]);for(var t=0;t<this._glState.programs.length;t++){var e=this._glState.programs[t];this.gl.deleteProgram(e.program)}this._glState={currentProgramID:null,programs:[],currentBuffersID:0,setDepth:null,frameBufferID:null,scenePassIndex:null,cullFace:null,flipY:null};var i=this,s=setInterval(function(){0===i.planes.length&&0===i.shaderPasses.length&&0===i.renderTargets.length&&(clearInterval(s),i._clear(),i._animationFrameID&&window.cancelAnimationFrame(i._animationFrameID),this._resizeHandler&&window.removeEventListener(\"resize\",i._resizeHandler,!1),this._watchScroll&&window.removeEventListener(\"scroll\",this._scrollManager.handler,{passive:!0}),i.glCanvas.removeEventListener(\"webgllost\",i._contextLostHandler,!1),i.glCanvas.removeEventListener(\"webglrestored\",i._contextRestoredHandler,!1),i.gl&&i._extensions.WEBGL_lose_context&&i._extensions.WEBGL_lose_context.loseContext(),i.glCanvas.width=i.glCanvas.width,i.gl=null,i.container.removeChild(i.glCanvas),i.container=null,i.glCanvas=null)},100)},Curtains.prototype._createShader=function(t,e){var i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.productionMode&&!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)){for(var s=e===this.gl.VERTEX_SHADER?\"vertex shader\":\"fragment shader\",r=this.gl.getShaderSource(i).split(\"\\n\"),a=0;a<r.length;a++)r[a]=a+1+\": \"+r[a];return r=r.join(\"\\n\"),console.warn(\"Errors occurred while compiling the\",s,\":\\n\",this.gl.getShaderInfoLog(i)),console.error(r),null}return i},Curtains.prototype._isEqualShader=function(t,e){var i=!1;return 0===t.localeCompare(e)&&(i=!0),i},Curtains.prototype._setupProgram=function(t,e,i){for(var s={},r=0;r<this._glState.programs.length;r++)if(this._isEqualShader(this._glState.programs[r].vsCode,t)&&this._isEqualShader(this._glState.programs[r].fsCode,e)){s=this._glState.programs[r];break}if(s.program){if(i.shareProgram)return s;var a=this._useExistingShaders(s);return this._createProgram(a,i._type)}return!!(a=this._useNewShaders(t,e))&&this._createProgram(a,i._type)},Curtains.prototype._useExistingShaders=function(t){return{vs:{vertexShader:t.vertexShader,vsCode:t.vsCode},fs:{fragmentShader:t.fragmentShader,fsCode:t.fsCode}}},Curtains.prototype._useNewShaders=function(t,e){var i=!0,s=this._createShader(t,this.gl.VERTEX_SHADER),r=this._createShader(e,this.gl.FRAGMENT_SHADER);return s&&r||(this.productionMode||console.warn(\"Unable to find or compile the vertex or fragment shader\"),i=!1),i?{vs:{vertexShader:s,vsCode:t},fs:{fragmentShader:r,fsCode:e}}:i},Curtains.prototype._createProgram=function(t,e){var i=this.gl,s=!0,r=i.createProgram();if(s&&(i.attachShader(r,t.vs.vertexShader),i.attachShader(r,t.fs.fragmentShader),i.linkProgram(r),this.productionMode||i.getProgramParameter(r,i.LINK_STATUS)||(console.warn(\"Unable to initialize the shader program.\"),s=!1),i.deleteShader(t.vs.vertexShader),i.deleteShader(t.fs.fragmentShader)),s){var a={id:this._glState.programs.length,vsCode:t.vs.vsCode,vertexShader:t.vs.vertexShader,fsCode:t.fs.fsCode,fragmentShader:t.fs.fragmentShader,program:r,type:e};return\"Plane\"===e&&(this._drawStacks.opaque.programs[\"program-\"+a.id]=[],this._drawStacks.transparent.programs[\"program-\"+a.id]=[]),this._glState.programs.push(a),a}return s},Curtains.prototype._useProgram=function(t){null!==this._glState.currentProgramID&&this._glState.currentProgramID===t.id||(this.gl.useProgram(t.program),this._glState.currentProgramID=t.id)},Curtains.prototype.addPlane=function(t,e){if(this.gl){if(!t||0===t.length)return this.productionMode||console.warn(\"The html element you specified does not currently exists in the DOM\"),this._onErrorCallback&&this._onErrorCallback(),!1;var i=new Curtains.Plane(this,t,e);return i._usedProgram?this.planes.push(i):i=!1,i}return this.productionMode||console.warn(\"Unable to create a plane. The WebGl context couldn't be created\"),this._onErrorCallback&&this._onErrorCallback(),null},Curtains.prototype.removePlane=function(t){t._canDraw=!1;var e,i=t._transparent?\"transparent\":\"opaque\";t&&t._dispose();for(var s=0;s<this.planes.length;s++)t.uuid===this.planes[s].uuid&&(e=s);t=null,this.planes[e]=null,this.planes.splice(e,1);for(s=0;s<this._glState.programs.length;s++)this._drawStacks.opaque.programs[\"program-\"+this._glState.programs[s].id]=[],this._drawStacks.transparent.programs[\"program-\"+this._glState.programs[s].id]=[];this._drawStacks.opaque.length=0,this._drawStacks.transparent.length=0;for(s=0;s<this.planes.length;s++){(t=this.planes[s]).index=s;var r=t._transparent?\"transparent\":\"opaque\";\"transparent\"===r?this._drawStacks[r].programs[\"program-\"+t._usedProgram.id].unshift(t.index):this._drawStacks[r].programs[\"program-\"+t._usedProgram.id].push(t.index),this._drawStacks[r].length++}for(s=0;s<this._drawStacks[i].order.length;s++){var a=this._drawStacks[i].order[s];0===this._drawStacks[i].programs[\"program-\"+a].length&&this._drawStacks[i].order.splice(s,1)}this.gl&&this._clear(),this._glState.currentBuffersID=0},Curtains.prototype._stackPlane=function(t){var e=t._transparent?\"transparent\":\"opaque\",i=this._drawStacks[e];\"transparent\"===e?(i.programs[\"program-\"+t._usedProgram.id].unshift(t.index),i.order.includes(t._usedProgram.id)||i.order.unshift(t._usedProgram.id)):(i.programs[\"program-\"+t._usedProgram.id].push(t.index),i.order.includes(t._usedProgram.id)||i.order.push(t._usedProgram.id)),i.length++},Curtains.prototype.addRenderTarget=function(t){return this.gl?new Curtains.RenderTarget(this,t):(this.productionMode||console.warn(\"Unable to create a render target. The WebGl context couldn't be created\"),this._onErrorCallback&&this._onErrorCallback(),null)},Curtains.prototype.removeRenderTarget=function(t){if(t._shaderPass)this.productionMode||console.warn(\"You're trying to remove a render target attached to a shader pass. You should remove that shader pass instead:\",t._shaderPass);else{for(var e=0;e<this.planes.length;e++)this.planes[e].target&&this.planes[e].target.uuid===t.uuid&&(this.planes[e].target=null);var i;for(e=0;e<this.renderTargets.length;e++)t.uuid===this.renderTargets[e].uuid&&(i=e);this.renderTargets[i]=null,this.renderTargets.splice(i,1),t&&t._dispose(),t=null,this.gl&&this._clear(),this._glState.currentBuffersID=0}},Curtains.prototype.addShaderPass=function(t){if(this.gl){var e=new Curtains.ShaderPass(this,t);return e._usedProgram?(t.renderTarget?this._drawStacks.renderPasses.push(e.index):this._drawStacks.scenePasses.push(e.index),this.shaderPasses.push(e)):e=!1,e}return this.productionMode||console.warn(\"Unable to create a shader pass. The WebGl context couldn't be created\"),this._onErrorCallback&&this._onErrorCallback(),null},Curtains.prototype.removeShaderPass=function(t){var e;t._canDraw=!1,t.target&&(t.target._shaderPass=null,this.removeRenderTarget(t.target),t.target=null);for(var i=0;i<this.shaderPasses.length;i++)t.uuid===this.shaderPasses[i].uuid&&(e=i);this.shaderPasses.splice(e,1),this._drawStacks.scenePasses=[],this._drawStacks.renderPasses=[];for(i=0;i<this.shaderPasses.length;i++)this.shaderPasses[i].index=i,this.shaderPasses[i]._isScenePass?this._drawStacks.scenePasses.push(this.shaderPasses[i].index):this._drawStacks.renderPasses.push(this.shaderPasses[i].index);0===this._drawStacks.scenePasses.length&&(this._glState.scenePassIndex=null),t&&t._dispose(),t=null,this.gl&&this._clear(),this._glState.currentBuffersID=0},Curtains.prototype._clear=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)},Curtains.prototype._bindFrameBuffer=function(t,e){var i=null;t?(i=t.index)!==this._glState.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t._frameBuffer),this.gl.viewport(0,0,t._size.width,t._size.height),t._shouldClear&&!e&&this._clear()):null!==this._glState.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)),this._glState.frameBufferID=i},Curtains.prototype._setDepth=function(t){t&&!this._glState.depthTest?(this._glState.depthTest=t,this.gl.enable(this.gl.DEPTH_TEST)):!t&&this._glState.depthTest&&(this._glState.depthTest=t,this.gl.disable(this.gl.DEPTH_TEST))},Curtains.prototype._setBlendFunc=function(){var t=this.gl;t.enable(t.BLEND),this.premultipliedAlpha?t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA):t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)},Curtains.prototype._setFaceCulling=function(t){var e=this.gl;if(this._glState.cullFace!==t)if(this._glState.cullFace=t,\"none\"===t)e.disable(e.CULL_FACE);else{var i=\"front\"===t?e.FRONT:e.BACK;e.enable(e.CULL_FACE),e.cullFace(i)}},Curtains.prototype._generateUUID=function(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return(\"x\"==t?e:3&e|8).toString(16).toUpperCase()})},Curtains.prototype._multiplyMatrix=function(t,e){var i=new Float32Array(16);return i[0]=e[0]*t[0]+e[1]*t[4]+e[2]*t[8]+e[3]*t[12],i[1]=e[0]*t[1]+e[1]*t[5]+e[2]*t[9]+e[3]*t[13],i[2]=e[0]*t[2]+e[1]*t[6]+e[2]*t[10]+e[3]*t[14],i[3]=e[0]*t[3]+e[1]*t[7]+e[2]*t[11]+e[3]*t[15],i[4]=e[4]*t[0]+e[5]*t[4]+e[6]*t[8]+e[7]*t[12],i[5]=e[4]*t[1]+e[5]*t[5]+e[6]*t[9]+e[7]*t[13],i[6]=e[4]*t[2]+e[5]*t[6]+e[6]*t[10]+e[7]*t[14],i[7]=e[4]*t[3]+e[5]*t[7]+e[6]*t[11]+e[7]*t[15],i[8]=e[8]*t[0]+e[9]*t[4]+e[10]*t[8]+e[11]*t[12],i[9]=e[8]*t[1]+e[9]*t[5]+e[10]*t[9]+e[11]*t[13],i[10]=e[8]*t[2]+e[9]*t[6]+e[10]*t[10]+e[11]*t[14],i[11]=e[8]*t[3]+e[9]*t[7]+e[10]*t[11]+e[11]*t[15],i[12]=e[12]*t[0]+e[13]*t[4]+e[14]*t[8]+e[15]*t[12],i[13]=e[12]*t[1]+e[13]*t[5]+e[14]*t[9]+e[15]*t[13],i[14]=e[12]*t[2]+e[13]*t[6]+e[14]*t[10]+e[15]*t[14],i[15]=e[12]*t[3]+e[13]*t[7]+e[14]*t[11]+e[15]*t[15],i},Curtains.prototype._scaleMatrix=function(t,e,i,s){var r=new Float32Array(16);return r[0]=e*t[0],r[1]=e*t[1],r[2]=e*t[2],r[3]=e*t[3],r[4]=i*t[4],r[5]=i*t[5],r[6]=i*t[6],r[7]=i*t[7],r[8]=s*t[8],r[9]=s*t[9],r[10]=s*t[10],r[11]=s*t[11],t!==r&&(r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r},Curtains.prototype._composeMatrixFromOrigin=function(t,e,i,s){var r=new Float32Array(16),a=e[0],n=e[1],o=e[2],h=e[3],u=a+a,l=n+n,_=o+o,c=a*u,d=a*l,p=a*_,g=n*l,f=n*_,m=o*_,x=h*u,v=h*l,P=h*_,y=i.x,b=i.y,C=s.x,T=s.y,S=s.z,w=(1-(g+m))*y,R=(d+P)*y,M=(p-v)*y,E=(d-P)*b,B=(1-(c+m))*b,D=(f+x)*b,F=1*(p+v),A=1*(f-x),L=1*(1-(c+g));return r[0]=w,r[1]=R,r[2]=M,r[3]=0,r[4]=E,r[5]=B,r[6]=D,r[7]=0,r[8]=F,r[9]=A,r[10]=L,r[11]=0,r[12]=t.x+C-(w*C+E*T+F*S),r[13]=t.y+T-(R*C+B*T+A*S),r[14]=t.z+S-(M*C+D*T+L*S),r[15]=1,r},Curtains.prototype._applyMatrixToPoint=function(t,e){var i=[],s=t[0],r=t[1],a=t[2];i[0]=e[0]*s+e[4]*r+e[8]*a+e[12],i[1]=e[1]*s+e[5]*r+e[9]*a+e[13],i[2]=e[2]*s+e[6]*r+e[10]*a+e[14];var n=e[3]*s+e[7]*r+e[11]*a+e[15];return n=n||1,i[0]/=n,i[1]/=n,i[2]/=n,i},Curtains.prototype._readyToDraw=function(){this.container.appendChild(this.glCanvas),this._setBlendFunc(),this._setDepth(!0),console.log(\"curtains.js - v6.1\"),this._animationFrameID=null,this._autoRender&&this._animate()},Curtains.prototype._animate=function(){this.render(),this._animationFrameID=window.requestAnimationFrame(this._animate.bind(this))},Curtains.prototype._drawPlaneStack=function(t){for(var e=0;e<this._drawStacks[t].order.length;e++)for(var i=this._drawStacks[t].order[e],s=this._drawStacks[t].programs[\"program-\"+i],r=0;r<s.length;r++){var a=this.planes[s[r]];a&&a._drawPlane()}},Curtains.prototype.render=function(){if(this._drawingEnabled||this._forceRender){this._forceRender&&(this._forceRender=!1),this._onRenderCallback&&this._onRenderCallback(),this._clear(),this._drawStacks.scenePasses.length>0&&0===this._drawStacks.renderPasses.length&&(this._glState.scenePassIndex=0,this._bindFrameBuffer(this.shaderPasses[this._drawStacks.scenePasses[0]].target)),this._drawPlaneStack(\"opaque\"),this._drawStacks.transparent.length&&(this.gl.clearDepth(1),this.gl.clear(this.gl.DEPTH_BUFFER_BIT),this._drawPlaneStack(\"transparent\")),this._drawStacks.scenePasses.length>0&&this._drawStacks.renderPasses.length>0&&(this._glState.scenePassIndex=0,this._bindFrameBuffer(this.shaderPasses[this._drawStacks.scenePasses[0]].target));for(var t=0;t<this._drawStacks.renderPasses.length;t++){this.shaderPasses[this._drawStacks.renderPasses[t]]._drawPlane()}if(this._drawStacks.scenePasses.length>0)for(t=0;t<this._drawStacks.scenePasses.length;t++){this.shaderPasses[this._drawStacks.scenePasses[t]]._drawPlane()}}},Curtains.prototype.onAfterResize=function(t){return t&&(this._onAfterResizeCallback=t),this},Curtains.prototype.onError=function(t){return t&&(this._onErrorCallback=t),this},Curtains.prototype.onContextLost=function(t){return t&&(this._onContextLostCallback=t),this},Curtains.prototype.onContextRestored=function(t){return t&&(this._onContextRestoredCallback=t),this},Curtains.prototype.onRender=function(t){return t&&(this._onRenderCallback=t),this},Curtains.prototype.onScroll=function(t){return t&&(this._onScrollCallback=t),this},Curtains.BasePlane=function(t,e,i){this._type=this._type||\"BasicPlane\",this._curtains=t,this.htmlElement=e,this.uuid=this._curtains._generateUUID(),this._initBasePlane(i)},Curtains.BasePlane.prototype._initBasePlane=function(t){if(t||(t={}),this._canDraw=!1,this.shareProgram=t.shareProgram||!1,this._updatePerspectiveMatrix=!1,this._updateMVMatrix=!1,this._definition={width:parseInt(t.widthSegments)||1,height:parseInt(t.heightSegments)||1},this._definition.buffersID=this._definition.width*this._definition.height+this._definition.width,this._depthTest=t.depthTest,null!==this._depthTest&&void 0!==this._depthTest||(this._depthTest=!0),this.cullFace=t.cullFace,\"back\"!==this.cullFace&&\"front\"!==this.cullFace&&\"none\"!==this.cullFace&&(this.cullFace=\"back\"),this._activeTextures=[],t.uniforms||(t.uniforms={}),this.uniforms={},t.uniforms)for(var e in t.uniforms){var i=t.uniforms[e];this.uniforms[e]={name:i.name,type:i.type,value:i.value,lastValue:i.value}}var s=this._setupShaders(t);return this._usedProgram=this._curtains._setupProgram(s.vertexShaderCode,s.fragmentShaderCode,this),this._loadingManager={sourcesLoaded:0,initSourcesToLoad:0,complete:!1},this.images=[],this.videos=[],this.canvases=[],this.textures=[],this.crossOrigin=t.crossOrigin||\"anonymous\",this.userData={},!!this._usedProgram&&(this._shouldDraw=!0,this.visible=!0,this._setAttributes(),this._setDocumentSizes(),this._setUniforms(),this._initializeBuffers(),this._canDraw=!0,this)},Curtains.BasePlane.prototype._getDefaultVS=function(){return this._curtains.productionMode||console.warn(\"No vertex shader provided, will use a default one\"),\"precision mediump float;\\nattribute vec3 aVertexPosition;attribute vec2 aTextureCoord;uniform mat4 uMVMatrix;uniform mat4 uPMatrix;varying vec3 vVertexPosition;varying vec2 vTextureCoord;void main() {vTextureCoord = aTextureCoord;vVertexPosition = aVertexPosition;gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);}\"},Curtains.BasePlane.prototype._getDefaultFS=function(){return\"precision mediump float;\\nvarying vec3 vVertexPosition;varying vec2 vTextureCoord;void main( void ) {gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);}\"},Curtains.BasePlane.prototype._setupShaders=function(t){var e,i,s=t.vertexShaderID||this.htmlElement.getAttribute(\"data-vs-id\"),r=t.fragmentShaderID||this.htmlElement.getAttribute(\"data-fs-id\");return t.vertexShader||(e=s&&document.getElementById(s)?document.getElementById(s).innerHTML:this._getDefaultVS()),t.fragmentShader||(r&&document.getElementById(r)?i=document.getElementById(r).innerHTML:(this._curtains.productionMode||console.warn(\"No fragment shader provided, will use a default one\"),i=this._getDefaultFS())),{vertexShaderCode:t.vertexShader||e,fragmentShaderCode:t.fragmentShader||i}},Curtains.BasePlane.prototype._handleUniformSetting=function(t,e,i){var s=this._curtains.gl;switch(t){case\"1i\":s.uniform1i(e,i);break;case\"1iv\":s.uniform1iv(e,i);break;case\"1f\":s.uniform1f(e,i);break;case\"1fv\":s.uniform1fv(e,i);break;case\"2i\":s.uniform2i(e,i[0],i[1]);break;case\"2iv\":s.uniform2iv(e,i);break;case\"2f\":s.uniform2f(e,i[0],i[1]);break;case\"2fv\":s.uniform2fv(e,i);break;case\"3i\":s.uniform3i(e,i[0],i[1],i[2]);break;case\"3iv\":s.uniform3iv(e,i);break;case\"3f\":s.uniform3f(e,i[0],i[1],i[2]);break;case\"3fv\":s.uniform3fv(e,i);break;case\"4i\":s.uniform4i(e,i[0],i[1],i[2],i[3]);break;case\"4iv\":s.uniform4iv(e,i);break;case\"4f\":s.uniform4f(e,i[0],i[1],i[2],i[3]);break;case\"4fv\":s.uniform4fv(e,i);break;case\"mat2\":s.uniformMatrix2fv(e,!1,i);break;case\"mat3\":s.uniformMatrix3fv(e,!1,i);break;case\"mat4\":s.uniformMatrix4fv(e,!1,i);break;default:this._curtains.productionMode||console.warn(\"This uniform type is not handled : \",t)}},Curtains.BasePlane.prototype._setUniforms=function(){var t=this._curtains,e=t.gl;t._useProgram(this._usedProgram);for(var i=e.getProgramParameter(this._usedProgram.program,e.ACTIVE_UNIFORMS),s=0;s<i;s++){var r=e.getActiveUniform(this._usedProgram.program,s);r.type===e.SAMPLER_2D&&this._activeTextures.push(r)}if(this.uniforms)for(var a in this.uniforms){var n=this.uniforms[a];n.location=e.getUniformLocation(this._usedProgram.program,n.name),n.type||(Array.isArray(n.value)?4===n.value.length?(n.type=\"4f\",t.productionMode||console.warn(\"No uniform type declared for \"+n.name+\", applied a 4f (array of 4 floats) uniform type\")):3===n.value.length?(n.type=\"3f\",t.productionMode||console.warn(\"No uniform type declared for \"+n.name+\", applied a 3f (array of 3 floats) uniform type\")):2===n.value.length&&(n.type=\"2f\",t.productionMode||console.warn(\"No uniform type declared for \"+n.name+\", applied a 2f (array of 2 floats) uniform type\")):n.value.constructor===Float32Array?16===n.value.length?(n.type=\"mat4\",t.productionMode||console.warn(\"No uniform type declared for \"+n.name+\", applied a mat4 (4x4 matrix array) uniform type\")):9===n.value.length?(n.type=\"mat3\",t.productionMode||console.warn(\"No uniform type declared for \"+n.name+\", applied a mat3 (3x3 matrix array) uniform type\")):4===n.value.length&&(n.type=\"mat2\",t.productionMode||console.warn(\"No uniform type declared for \"+n.name+\", applied a mat2 (2x2 matrix array) uniform type\")):(n.type=\"1f\",t.productionMode||console.warn(\"No uniform type declared for \"+n.name+\", applied a 1f (float) uniform type\"))),this._handleUniformSetting(n.type,n.location,n.value)}},Curtains.BasePlane.prototype._updateUniforms=function(){if(this.uniforms)for(var t in this.uniforms){var e=this.uniforms[t];this.shareProgram?this._handleUniformSetting(e.type,e.location,e.value):(e.value.length||e.value===e.lastValue?JSON.stringify(e.value)!==JSON.stringify(e.lastValue)&&this._handleUniformSetting(e.type,e.location,e.value):this._handleUniformSetting(e.type,e.location,e.value),e.lastValue=e.value)}},Curtains.BasePlane.prototype._setAttributes=function(){this._attributes||(this._attributes={}),this._attributes.vertexPosition={name:\"aVertexPosition\",location:this._curtains.gl.getAttribLocation(this._usedProgram.program,\"aVertexPosition\")},this._attributes.textureCoord={name:\"aTextureCoord\",location:this._curtains.gl.getAttribLocation(this._usedProgram.program,\"aTextureCoord\")}},Curtains.BasePlane.prototype._setPlaneVertices=function(){this._geometry={vertices:[]},this._material={uvs:[]};for(var t=0;t<this._definition.height;++t)for(var e=t/this._definition.height,i=0;i<this._definition.width;++i){var s=i/this._definition.width;this._material.uvs.push(s),this._material.uvs.push(e),this._material.uvs.push(0),this._geometry.vertices.push(2*(s-.5)),this._geometry.vertices.push(2*(e-.5)),this._geometry.vertices.push(0),this._material.uvs.push(s+1/this._definition.width),this._material.uvs.push(e),this._material.uvs.push(0),this._geometry.vertices.push(2*(s+1/this._definition.width-.5)),this._geometry.vertices.push(2*(e-.5)),this._geometry.vertices.push(0),this._material.uvs.push(s),this._material.uvs.push(e+1/this._definition.height),this._material.uvs.push(0),this._geometry.vertices.push(2*(s-.5)),this._geometry.vertices.push(2*(e+1/this._definition.height-.5)),this._geometry.vertices.push(0),this._material.uvs.push(s),this._material.uvs.push(e+1/this._definition.height),this._material.uvs.push(0),this._geometry.vertices.push(2*(s-.5)),this._geometry.vertices.push(2*(e+1/this._definition.height-.5)),this._geometry.vertices.push(0),this._material.uvs.push(s+1/this._definition.width),this._material.uvs.push(e),this._material.uvs.push(0),this._geometry.vertices.push(2*(s+1/this._definition.width-.5)),this._geometry.vertices.push(2*(e-.5)),this._geometry.vertices.push(0),this._material.uvs.push(s+1/this._definition.width),this._material.uvs.push(e+1/this._definition.height),this._material.uvs.push(0),this._geometry.vertices.push(2*(s+1/this._definition.width-.5)),this._geometry.vertices.push(2*(e+1/this._definition.height-.5)),this._geometry.vertices.push(0)}},Curtains.BasePlane.prototype._initializeBuffers=function(){var t=this._curtains.gl;this._geometry||this._material||this._setPlaneVertices(),this._attributes&&(this._geometry.bufferInfos={id:t.createBuffer(),itemSize:3,numberOfItems:this._geometry.vertices.length/3},this._material.bufferInfos={id:t.createBuffer(),itemSize:3,numberOfItems:this._material.uvs.length/3},this._curtains._isWebGL2?(this._vao=t.createVertexArray(),t.bindVertexArray(this._vao)):this._curtains._extensions.OES_vertex_array_object&&(this._vao=this._curtains._extensions.OES_vertex_array_object.createVertexArrayOES(),this._curtains._extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao)),t.enableVertexAttribArray(this._attributes.vertexPosition.location),t.bindBuffer(t.ARRAY_BUFFER,this._geometry.bufferInfos.id),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._geometry.vertices),t.STATIC_DRAW),t.vertexAttribPointer(this._attributes.vertexPosition.location,this._geometry.bufferInfos.itemSize,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this._attributes.textureCoord.location),t.bindBuffer(t.ARRAY_BUFFER,this._material.bufferInfos.id),t.bufferData(t.ARRAY_BUFFER,new Float32Array(this._material.uvs),t.STATIC_DRAW),t.vertexAttribPointer(this._attributes.textureCoord.location,this._material.bufferInfos.itemSize,t.FLOAT,!1,0,0),this._curtains._glState.currentBuffersID=this._definition.buffersID)},Curtains.BasePlane.prototype._restoreContext=function(){var t=this._curtains;if(this._canDraw=!1,this._matrices&&(this._matrices=null),this._attributes=null,this._geometry.bufferInfos=null,this._material.bufferInfos=null,this._usedProgram=t._setupProgram(this._usedProgram.vsCode,this._usedProgram.fsCode,this),this._usedProgram){if(this._setAttributes(),this._activeTextures=[],this._setUniforms(),this._initializeBuffers(),\"ShaderPass\"===this._type)if(this._isScenePass)this.target._frameBuffer=null,this.target._depthBuffer=null,t.renderTargets.splice(this.target.index,1),this.textures.splice(0,1),this._createFrameBuffer(),t._drawStacks.scenePasses.push(this.index);else{var e=t.renderTargets[this.target.index];this.setRenderTarget(e),this.target._shaderPass=e,this.textures[0]._canDraw=!1,this.textures[0]._setTextureUniforms(),this.textures[0].setFromTexture(e.textures[0]),t._drawStacks.renderPasses.push(this.index)}else this.target&&this.setRenderTarget(t.renderTargets[this.target.index]);for(var i=\"ShaderPass\"===this._type?1:0;i<this.textures.length;i++)this.textures[i]._restoreContext();\"Plane\"===this._type&&(this._initMatrices(),this.setPerspective(this._fov,this._nearPlane,this._farPlane),this._applyWorldPositions(),t._stackPlane(this)),this._canDraw=!0}},Curtains.BasePlane.prototype._setDocumentSizes=function(){var t=this.htmlElement.getBoundingClientRect();0===t.width&&0===t.height&&(t=this._curtains._boundingRect),this._boundingRect||(this._boundingRect={}),this._boundingRect.document={width:t.width*this._curtains.pixelRatio,height:t.height*this._curtains.pixelRatio,top:t.top*this._curtains.pixelRatio,left:t.left*this._curtains.pixelRatio}},Curtains.BasePlane.prototype.getBoundingRect=function(){return{width:this._boundingRect.document.width,height:this._boundingRect.document.height,top:this._boundingRect.document.top,left:this._boundingRect.document.left,right:this._boundingRect.document.left+this._boundingRect.document.width,bottom:this._boundingRect.document.top+this._boundingRect.document.height}},Curtains.BasePlane.prototype._getNearPlaneIntersections=function(t,e,i){function s(t,e){for(var i=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],s=t.slice();s[2]>-1;)s[0]+=i[0],s[1]+=i[1],s[2]+=i[2];return s}if(1===i.length)0===i[0]?(e[0]=s(e[1],this._curtains._applyMatrixToPoint([.95,1,0],this._matrices.mVPMatrix)),e.push(s(e[3],this._curtains._applyMatrixToPoint([-1,-.95,0],this._matrices.mVPMatrix)))):1===i[0]?(e[1]=s(e[0],this._curtains._applyMatrixToPoint([-.95,1,0],this._matrices.mVPMatrix)),e.push(s(e[2],this._curtains._applyMatrixToPoint([1,-.95,0],this._matrices.mVPMatrix)))):2===i[0]?(e[2]=s(e[3],this._curtains._applyMatrixToPoint([-.95,-1,0],this._matrices.mVPMatrix)),e.push(s(e[1],this._curtains._applyMatrixToPoint([1,.95,0],this._matrices.mVPMatrix)))):3===i[0]&&(e[3]=s(e[2],this._curtains._applyMatrixToPoint([.95,-1,0],this._matrices.mVPMatrix)),e.push(s(e[0],this._curtains._applyMatrixToPoint([-1,.95,0],this._matrices.mVPMatrix))));else if(2===i.length)0===i[0]&&1===i[1]?(e[0]=s(e[3],this._curtains._applyMatrixToPoint([-1,-.95,0],this._matrices.mVPMatrix)),e[1]=s(e[2],this._curtains._applyMatrixToPoint([1,-.95,0],this._matrices.mVPMatrix))):1===i[0]&&2===i[1]?(e[1]=s(e[0],this._curtains._applyMatrixToPoint([-.95,1,0],this._matrices.mVPMatrix)),e[2]=s(e[3],this._curtains._applyMatrixToPoint([-.95,-1,0],this._matrices.mVPMatrix))):2===i[0]&&3===i[1]?(e[2]=s(e[1],this._curtains._applyMatrixToPoint([1,.95,0],this._matrices.mVPMatrix)),e[3]=s(e[0],this._curtains._applyMatrixToPoint([-1,.95,0],this._matrices.mVPMatrix))):0===i[0]&&3===i[1]&&(e[0]=s(e[1],this._curtains._applyMatrixToPoint([.95,1,0],this._matrices.mVPMatrix)),e[3]=s(e[2],this._curtains._applyMatrixToPoint([.95,-1,0],this._matrices.mVPMatrix)));else if(3===i.length){for(var r=0,a=0;a<t.length;a++)i.includes(a)||(r=a);e=[e[r]],0===r?(e.push(s(e[0],this._curtains._applyMatrixToPoint([-.95,1,0],this._matrices.mVPMatrix))),e.push(s(e[0],this._curtains._applyMatrixToPoint([-1,.95,0],this._matrices.mVPMatrix)))):1===r?(e.push(s(e[0],this._curtains._applyMatrixToPoint([.95,1,0],this._matrices.mVPMatrix))),e.push(s(e[0],this._curtains._applyMatrixToPoint([1,.95,0],this._matrices.mVPMatrix)))):2===r?(e.push(s(e[0],this._curtains._applyMatrixToPoint([.95,-1,0],this._matrices.mVPMatrix))),e.push(s(e[0],this._curtains._applyMatrixToPoint([1,-.95,0],this._matrices.mVPMatrix)))):3===r&&(e.push(s(e[0],this._curtains._applyMatrixToPoint([-.95,-1,0],this._matrices.mVPMatrix))),e.push(s(e[0],this._curtains._applyMatrixToPoint([-1,-.95,0],this._matrices.mVPMatrix))))}else for(a=0;a<t.length;a++)e[a][0]=1e4,e[a][1]=1e4;return e},Curtains.BasePlane.prototype._getWorldCoords=function(){for(var t=[[-1,1,0],[1,1,0],[1,-1,0],[-1,-1,0]],e=[],i=[],s=0;s<t.length;s++){var r=this._curtains._applyMatrixToPoint(t[s],this._matrices.mVPMatrix);e.push(r),Math.abs(r[2])>1&&i.push(s)}i.length&&(e=this._getNearPlaneIntersections(t,e,i));var a=1/0,n=-1/0,o=1/0,h=-1/0;for(s=0;s<e.length;s++){var u=e[s];u[0]<a&&(a=u[0]),u[0]>n&&(n=u[0]),u[1]<o&&(o=u[1]),u[1]>h&&(h=u[1])}return{top:h,right:n,bottom:o,left:a}},Curtains.BasePlane.prototype.getWebGLBoundingRect=function(){if(this._matrices.mVPMatrix){var t=this._getWorldCoords(),e={top:1-(t.top+1)/2,right:(t.right+1)/2,bottom:1-(t.bottom+1)/2,left:(t.left+1)/2};return e.width=e.right-e.left,e.height=e.bottom-e.top,{width:e.width*this._curtains._boundingRect.width,height:e.height*this._curtains._boundingRect.height,top:e.top*this._curtains._boundingRect.height+this._curtains._boundingRect.top,left:e.left*this._curtains._boundingRect.width+this._curtains._boundingRect.left,right:e.left*this._curtains._boundingRect.width+this._curtains._boundingRect.left+e.width*this._curtains._boundingRect.width,bottom:e.top*this._curtains._boundingRect.height+this._curtains._boundingRect.top+e.height*this._curtains._boundingRect.height}}return this._boundingRect.document},Curtains.BasePlane.prototype._getWebGLDrawRect=function(){var t=this.getWebGLBoundingRect();return{top:t.top-this.drawCheckMargins.top,right:t.right+this.drawCheckMargins.right,bottom:t.bottom+this.drawCheckMargins.bottom,left:t.left-this.drawCheckMargins.left}},Curtains.BasePlane.prototype.planeResize=function(){this._setDocumentSizes(),\"Plane\"===this._type&&(this.setPerspective(this._fov,this._nearPlane,this._farPlane),this._applyWorldPositions());for(var t=0;t<this.textures.length;t++)this.textures[t].resize();var e=this;setTimeout(function(){e._onAfterResizeCallback&&e._onAfterResizeCallback()},0)},Curtains.BasePlane.prototype.createTexture=function(t){\"string\"==typeof t&&(t={sampler:t},this._curtains.productionMode||console.warn(\"Since v5.1 you should use an object to pass your sampler name with the createTexture() method. Please refer to the docs: https://www.curtainsjs.com/documentation.html (texture concerned: \",t.sampler,\")\")),t||(t={});var e=new Curtains.Texture(this,{index:this.textures.length,sampler:t.sampler||null,fromTexture:t.fromTexture||null,isFBOTexture:t.isFBOTexture||!1});return this.textures.push(e),e},Curtains.BasePlane.prototype._isPlaneReady=function(){if(!this._loadingManager.complete&&this._loadingManager.sourcesLoaded>=this._loadingManager.initSourcesToLoad){this._loadingManager.complete=!0,this._curtains.needRender();var t=this;setTimeout(function(){t._onReadyCallback&&t._onReadyCallback()},0)}},Curtains.BasePlane.prototype.loadSources=function(t){for(var e=0;e<t.length;e++)this.loadSource(t[e])},Curtains.BasePlane.prototype.loadSource=function(t){\"IMG\"===t.tagName.toUpperCase()?this.loadImage(t):\"VIDEO\"===t.tagName.toUpperCase()?this.loadVideo(t):\"CANVAS\"===t.tagName.toUpperCase()?this.loadCanvas(t):this._curtains.productionMode||console.warn(\"this HTML tag could not be converted into a texture:\",t.tagName)},Curtains.BasePlane.prototype._sourceLoadError=function(t,e){this._curtains.productionMode||console.warn(\"There has been an error:\",e,\"while loading this source:\",t)},Curtains.BasePlane.prototype._getTextureFromCache=function(t){var e=!1;if(this._curtains._imageCache.length>0)for(var i=0;i<this._curtains._imageCache.length;i++){var s=this._curtains._imageCache[i];s.source&&\"image\"===s.type&&s.source.src===t.src&&(e=s)}return e},Curtains.BasePlane.prototype.loadImage=function(t){var e=t;e.crossOrigin=this.crossOrigin||\"anonymous\",e.sampler=t.getAttribute(\"data-sampler\")||null;var i=this._getTextureFromCache(t);if(i)return this.createTexture({sampler:e.sampler,fromTexture:i}),this.images.push(i.source),void this._isPlaneReady();var s=this.createTexture({sampler:e.sampler});if(s._onSourceLoadedHandler=s._onSourceLoaded.bind(s,e),e.complete)s._onSourceLoaded(e);else if(e.decode){var r=this;e.decode().then(s._onSourceLoadedHandler).catch(function(){e.addEventListener(\"load\",s._onSourceLoadedHandler,!1),e.addEventListener(\"error\",r._sourceLoadError.bind(r,e),!1)})}else e.addEventListener(\"load\",s._onSourceLoadedHandler,!1),e.addEventListener(\"error\",this._sourceLoadError.bind(this,e),!1);this.images.push(e)},Curtains.BasePlane.prototype.loadVideo=function(t){var e=t;e.preload=!0,e.muted=!0,e.loop=!0,e.sampler=t.getAttribute(\"data-sampler\")||null,e.crossOrigin=this.crossOrigin||\"anonymous\";var i=this.createTexture({sampler:e.sampler});i._onSourceLoadedHandler=i._onVideoLoadedData.bind(i,e),e.addEventListener(\"canplaythrough\",i._onSourceLoadedHandler,!1),e.addEventListener(\"error\",this._sourceLoadError.bind(this,e),!1),e.readyState>=e.HAVE_FUTURE_DATA&&i._onSourceLoaded(e),e.load(),this.videos.push(e)},Curtains.BasePlane.prototype.loadCanvas=function(t){var e=t;e.sampler=t.getAttribute(\"data-sampler\")||null;var i=this.createTexture({sampler:e.sampler});this.canvases.push(e),i._onSourceLoaded(e)},Curtains.BasePlane.prototype.loadImages=function(t){for(var e=0;e<t.length;e++)this.loadImage(t[e])},Curtains.BasePlane.prototype.loadVideos=function(t){for(var e=0;e<t.length;e++)this.loadVideo(t[e])},Curtains.BasePlane.prototype.loadCanvases=function(t){for(var e=0;e<t.length;e++)this.loadCanvas(t[e])},Curtains.BasePlane.prototype.playVideos=function(){for(var t=0;t<this.textures.length;t++){var e=this.textures[t];if(\"video\"===e.type){var i=e.source.play(),s=this;void 0!==i&&i.catch(function(t){s._curtains.productionMode||console.warn(\"Could not play the video : \",t)})}}},Curtains.BasePlane.prototype.mouseToPlaneCoords=function(t,e){var i=this.scale?this.scale:{x:1,y:1},s=(this._boundingRect.document.width-this._boundingRect.document.width*i.x)/2,r=(this._boundingRect.document.height-this._boundingRect.document.height*i.y)/2,a=this._boundingRect.document.width*i.x/this._curtains.pixelRatio,n=this._boundingRect.document.height*i.y/this._curtains.pixelRatio,o=(this._boundingRect.document.top+r)/this._curtains.pixelRatio;return{x:(t-(this._boundingRect.document.left+s)/this._curtains.pixelRatio)/a*2-1,y:1-(e-o)/n*2}},Curtains.BasePlane.prototype._bindPlaneBuffers=function(){var t=this._curtains,e=t.gl;this._vao?t._isWebGL2?t.gl.bindVertexArray(this._vao):t._extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao):(e.enableVertexAttribArray(this._attributes.vertexPosition.location),e.bindBuffer(e.ARRAY_BUFFER,this._geometry.bufferInfos.id),e.vertexAttribPointer(this._attributes.vertexPosition.location,this._geometry.bufferInfos.itemSize,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this._attributes.textureCoord.location),e.bindBuffer(e.ARRAY_BUFFER,this._material.bufferInfos.id),e.vertexAttribPointer(this._attributes.textureCoord.location,this._material.bufferInfos.itemSize,e.FLOAT,!1,0,0)),t._glState.currentBuffersID=this._definition.buffersID},Curtains.BasePlane.prototype._bindPlaneTexture=function(t){var e=this._curtains.gl;t._canDraw&&(e.activeTexture(e.TEXTURE0+t.index),e.bindTexture(e.TEXTURE_2D,t._sampler.texture))},Curtains.BasePlane.prototype.setRenderTarget=function(t){t&&t._type&&\"RenderTarget\"===t._type?this.target=t:this._curtains.productionMode||console.warn(\"Could not set the render target because the argument passed is not a RenderTarget class object\",t)},Curtains.BasePlane.prototype._drawPlane=function(){var t=this._curtains,e=t.gl;if(this._canDraw&&(this._onRenderCallback&&this._onRenderCallback(),\"ShaderPass\"===this._type?this._isScenePass?t._glState.scenePassIndex+1<t._drawStacks.scenePasses.length?(t._bindFrameBuffer(t.shaderPasses[t._drawStacks.scenePasses[t._glState.scenePassIndex+1]].target),t._glState.scenePassIndex++):t._bindFrameBuffer(null):null===t._glState.scenePassIndex&&t._bindFrameBuffer(null):(this.target?t._bindFrameBuffer(this.target):null===t._glState.scenePassIndex&&t._bindFrameBuffer(null),this._setPerspectiveMatrix(),this._setMVMatrix()),(this.alwaysDraw||this._shouldDraw)&&this.visible)){t._setDepth(this._depthTest),t._setFaceCulling(this.cullFace),t._useProgram(this._usedProgram),this._updateUniforms(),(t._glState.currentBuffersID!==this._definition.buffersID||this.target)&&this._bindPlaneBuffers();for(var i=0;i<this.textures.length;i++)this.textures[i]._drawTexture();e.drawArrays(e.TRIANGLES,0,this._geometry.bufferInfos.numberOfItems),this._onAfterRenderCallback&&this._onAfterRenderCallback()}},Curtains.BasePlane.prototype._dispose=function(){var t=this._curtains.gl;if(t){this._vao&&(this._curtains._isWebGL2?t.deleteVertexArray(this._vao):this._curtains._extensions.OES_vertex_array_object.deleteVertexArrayOES(this._vao)),this._geometry&&(t.bindBuffer(t.ARRAY_BUFFER,this._geometry.bufferInfos.id),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this._geometry.bufferInfos.id),this._geometry=null),this._material&&(t.bindBuffer(t.ARRAY_BUFFER,this._material.bufferInfos.id),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this._material.bufferInfos.id),this._material=null),this.target&&\"ShaderPass\"===this._type&&(this._curtains.removeRenderTarget(this.target),this.textures.shift());for(var e=0;e<this.textures.length;e++)this.textures[e]._dispose();this.textures=null}},Curtains.BasePlane.prototype.onAfterResize=function(t){return t&&(this._onAfterResizeCallback=t),this},Curtains.BasePlane.prototype.onLoading=function(t){return t&&(this._onPlaneLoadingCallback=t),this},Curtains.BasePlane.prototype.onReady=function(t){return t&&(this._onReadyCallback=t),this},Curtains.BasePlane.prototype.onRender=function(t){return t&&(this._onRenderCallback=t),this},Curtains.BasePlane.prototype.onAfterRender=function(t){return t&&(this._onAfterRenderCallback=t),this},Curtains.Plane=function(t,e,i){this._type=\"Plane\",Curtains.BasePlane.call(this,t,e,i),this.index=this._curtains.planes.length,this._canDraw=!1,this.target=null,i||(i={}),this._setInitParams(i),this._usedProgram?(this._curtains._stackPlane(this),this._initPositions(),this._initSources()):this._curtains._onErrorCallback&&this._curtains._onErrorCallback()},Curtains.Plane.prototype=Object.create(Curtains.BasePlane.prototype),Curtains.Plane.prototype.constructor=Curtains.Plane,Curtains.Plane.prototype._setInitParams=function(t){this.alwaysDraw=t.alwaysDraw||!1,this._transparent=t.transparent||!1;var e={top:0,right:0,bottom:0,left:0};t.drawCheckMargins&&(e=t.drawCheckMargins),this.drawCheckMargins=e,this._initTransformValues(),this.autoloadSources=t.autoloadSources,null!==this.autoloadSources&&void 0!==this.autoloadSources||(this.autoloadSources=!0),this._fov=t.fov||50,this._nearPlane=.1,this._farPlane=150,null===t.watchScroll||void 0===t.watchScroll?this.watchScroll=this._curtains._watchScroll:this.watchScroll=t.watchScroll||!1,this.watchScroll&&(this._curtains._scrollManager.shouldWatch=!0)},Curtains.Plane.prototype._initTransformValues=function(){this.rotation={x:0,y:0,z:0},this.quaternion=new Float32Array([0,0,0,1]),this.relativeTranslation={x:0,y:0,z:0},this._translation={x:0,y:0,z:0},this.scale={x:1,y:1},this.transformOrigin={x:.5,y:.5,z:0}},Curtains.Plane.prototype._initPositions=function(){this._initMatrices(),this.setPerspective(this._fov,this._nearPlane,this._farPlane),this._applyWorldPositions()},Curtains.Plane.prototype._initSources=function(){if(this.autoloadSources){for(var t=[],e=0;e<this.htmlElement.getElementsByTagName(\"img\").length;e++)t.push(this.htmlElement.getElementsByTagName(\"img\")[e]);t.length>0&&this.loadSources(t);var i=[];for(e=0;e<this.htmlElement.getElementsByTagName(\"video\").length;e++)i.push(this.htmlElement.getElementsByTagName(\"video\")[e]);i.length>0&&this.loadSources(i);var s=[];for(e=0;e<this.htmlElement.getElementsByTagName(\"canvas\").length;e++)s.push(this.htmlElement.getElementsByTagName(\"canvas\")[e]);s.length>0&&this.loadSources(s),this._loadingManager.initSourcesToLoad=t.length+i.length+s.length}0===this._loadingManager.initSourcesToLoad&&(this._isPlaneReady(),this._curtains.productionMode||console.warn(\"This plane does not contain any image, video or canvas element. You may want to add some later with the loadSource() or loadSources() method.\")),this._canDraw=!0,this._curtains.needRender(),this.alwaysDraw||this._shouldDrawCheck()},Curtains.Plane.prototype._initMatrices=function(){var t=this._curtains.gl;this._matrices={mvMatrix:{name:\"uMVMatrix\",matrix:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),location:t.getUniformLocation(this._usedProgram.program,\"uMVMatrix\")},pMatrix:{name:\"uPMatrix\",matrix:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),location:t.getUniformLocation(this._usedProgram.program,\"uPMatrix\")}}},Curtains.Plane.prototype.resetPlane=function(t){this._initTransformValues(),null!==t&&t?(this.htmlElement=t,this.updatePosition()):t||this._curtains.productionMode||console.warn(\"You are trying to reset a plane with a HTML element that does not exist. The old HTML element will be kept instead.\")},Curtains.Plane.prototype._setWorldSizes=function(){var t=this._curtains,e=this._boundingRect.document.width/2+this._boundingRect.document.left,i=this._boundingRect.document.height/2+this._boundingRect.document.top,s=t._boundingRect.width/2+t._boundingRect.left,r=t._boundingRect.height/2+t._boundingRect.top;this._boundingRect.world={width:this._boundingRect.document.width/t._boundingRect.width,height:this._boundingRect.document.height/t._boundingRect.height,top:(r-i)/t._boundingRect.height,left:(e-s)/t._boundingRect.height},this._boundingRect.world.scale={x:this._curtains._boundingRect.width/this._curtains._boundingRect.height*this._boundingRect.world.width/2,y:this._boundingRect.world.height/2}},Curtains.Plane.prototype._setPerspectiveMatrix=function(){if(this._updatePerspectiveMatrix){var t=this._curtains._boundingRect.width/this._curtains._boundingRect.height,e=this._nearPlane*Math.tan(Math.PI/180*.5*this._fov),i=2*e,s=t*i,r=-.5*s,a=r+s,n=e-i,o=2*this._nearPlane/(a-r),h=2*this._nearPlane/(e-n),u=(a+r)/(a-r),l=(e+n)/(e-n),_=-(this._farPlane+this._nearPlane)/(this._farPlane-this._nearPlane),c=-2*this._farPlane*this._nearPlane/(this._farPlane-this._nearPlane);this._matrices.pMatrix.matrix=new Float32Array([o,0,0,0,0,h,0,0,u,l,_,-1,0,0,c,0])}(this.shareProgram||!this.shareProgram&&this._updatePerspectiveMatrix)&&(this._curtains._useProgram(this._usedProgram),this._curtains.gl.uniformMatrix4fv(this._matrices.pMatrix.location,!1,this._matrices.pMatrix.matrix)),this._updatePerspectiveMatrix=!1},Curtains.Plane.prototype.setPerspective=function(t,e,i){var s=isNaN(t)?this._fov:parseFloat(t);(s=Math.max(1,Math.min(s,179)))!==this._fov&&(this._fov=s),this._cameraZPosition=2*Math.tan(Math.PI/180*.5*this._fov),this._CSSPerspective=Math.pow(Math.pow(this._curtains._boundingRect.width/(2*this._curtains.pixelRatio),2)+Math.pow(this._curtains._boundingRect.height/(2*this._curtains.pixelRatio),2),.5)/Math.tan(this._fov/2*Math.PI/180),this._nearPlane=isNaN(e)?this._nearPlane:parseFloat(e),this._nearPlane=Math.max(this._nearPlane,.01),this._farPlane=isNaN(i)?this._farPlane:parseFloat(i),this._farPlane=Math.max(this._farPlane,50),this._updatePerspectiveMatrix=!0,this._updateMVMatrix=!0},Curtains.Plane.prototype._setMVMatrix=function(){if(this._updateMVMatrix){this._translation.z=this.relativeTranslation.z/this._CSSPerspective;var t={x:this._translation.x,y:this._translation.y,z:-(1-this._translation.z)/this._cameraZPosition},e={x:2*this.transformOrigin.x-1,y:-(2*this.transformOrigin.y-1)},i={x:e.x*this._boundingRect.world.scale.x,y:e.y*this._boundingRect.world.scale.y,z:this.transformOrigin.z},s=this._curtains._composeMatrixFromOrigin(t,this.quaternion,this.scale,i),r=new Float32Array([this._boundingRect.world.scale.x,0,0,0,0,this._boundingRect.world.scale.y,0,0,0,0,1,0,0,0,0,1]);this._matrices.mvMatrix.matrix=this._curtains._multiplyMatrix(s,r),this._matrices.mVPMatrix=this._curtains._multiplyMatrix(this._matrices.pMatrix.matrix,this._matrices.mvMatrix.matrix),this.alwaysDraw||this._shouldDrawCheck()}(this.shareProgram||!this.shareProgram&&this._updateMVMatrix)&&(this._curtains._useProgram(this._usedProgram),this._curtains.gl.uniformMatrix4fv(this._matrices.mvMatrix.location,!1,this._matrices.mvMatrix.matrix)),this._updateMVMatrix=!1},Curtains.Plane.prototype.setScale=function(t,e){if(t=isNaN(t)?this.scale.x:parseFloat(t),e=isNaN(e)?this.scale.y:parseFloat(e),t=Math.max(t,.001),e=Math.max(e,.001),t!==this.scale.x||e!==this.scale.y){this.scale={x:t,y:e};for(var i=0;i<this.textures.length;i++)this.textures[i].resize();this._updateMVMatrix=!0}},Curtains.Plane.prototype.setRotation=function(t,e,i){t=isNaN(t)?this.rotation.x:parseFloat(t),e=isNaN(e)?this.rotation.y:parseFloat(e),i=isNaN(i)?this.rotation.z:parseFloat(i),t===this.rotation.x&&e===this.rotation.y&&i===this.rotation.z||(this.rotation={x:t,y:e,z:i},this._setQuaternion(),this._updateMVMatrix=!0)},Curtains.Plane.prototype._setQuaternion=function(){var t=.5*this.rotation.x,e=.5*this.rotation.y,i=.5*this.rotation.z,s=Math.sin(t),r=Math.cos(t),a=Math.sin(e),n=Math.cos(e),o=Math.sin(i),h=Math.cos(i);this.quaternion[0]=s*n*h+r*a*o,this.quaternion[1]=r*a*h-s*n*o,this.quaternion[2]=r*n*o+s*a*h,this.quaternion[3]=r*n*h-s*a*o},Curtains.Plane.prototype.setTransformOrigin=function(t,e,i){t=isNaN(t)?this.transformOrigin.x:parseFloat(t),e=isNaN(e)?this.transformOrigin.y:parseFloat(e),i=isNaN(i)?this.transformOrigin.z:parseFloat(i),t===this.transformOrigin.x&&e===this.transformOrigin.y&&i===this.transformOrigin.z||(this.transformOrigin={x:t,y:e,z:i},this._updateMVMatrix=!0)},Curtains.Plane.prototype._setTranslation=function(){var t={x:0,y:0,z:0};0===this.relativeTranslation.x&&0===this.relativeTranslation.y&&0===this.relativeTranslation.z||(t=this._documentToLocalSpace(this.relativeTranslation.x,this.relativeTranslation.y)),this._translation.x=this._boundingRect.world.left+t.x,this._translation.y=this._boundingRect.world.top+t.y,this._updateMVMatrix=!0},Curtains.Plane.prototype.setRelativePosition=function(t,e,i){t=isNaN(t)?this.relativeTranslation.x:parseFloat(t),e=isNaN(e)?this.relativeTranslation.y:parseFloat(e),i=isNaN(i)?this.relativeTranslation.z:parseFloat(i),t===this.relativeTranslation.x&&e===this.relativeTranslation.y&&i===this.relativeTranslation.z||(this.relativeTranslation={x:t,y:e,z:i},this._setTranslation())},Curtains.Plane.prototype._documentToLocalSpace=function(t,e){return{x:t/(this._curtains._boundingRect.width/this._curtains.pixelRatio)*(this._curtains._boundingRect.width/this._curtains._boundingRect.height),y:-e/(this._curtains._boundingRect.height/this._curtains.pixelRatio)}},Curtains.Plane.prototype._shouldDrawCheck=function(){var t=this._getWebGLDrawRect(),e=this;Math.round(t.right)<=this._curtains._boundingRect.left||Math.round(t.left)>=this._curtains._boundingRect.left+this._curtains._boundingRect.width||Math.round(t.bottom)<=this._curtains._boundingRect.top||Math.round(t.top)>=this._curtains._boundingRect.top+this._curtains._boundingRect.height?this._shouldDraw&&(this._shouldDraw=!1,setTimeout(function(){e._onLeaveViewCallback&&e._onLeaveViewCallback()},0)):(this._shouldDraw||setTimeout(function(){e._onReEnterViewCallback&&e._onReEnterViewCallback()},0),this._shouldDraw=!0)},Curtains.Plane.prototype.isDrawn=function(){return this._canDraw&&this.visible&&(this._shouldDraw||this.alwaysDraw)},Curtains.Plane.prototype._applyWorldPositions=function(){this._setWorldSizes(),this._setTranslation()},Curtains.Plane.prototype.updatePosition=function(){this._setDocumentSizes(),this._applyWorldPositions()},Curtains.Plane.prototype.updateScrollPosition=function(){(this._curtains._scrollManager.lastXDelta||this._curtains._scrollManager.lastYDelta)&&(this._boundingRect.document.top+=this._curtains._scrollManager.lastYDelta*this._curtains.pixelRatio,this._boundingRect.document.left+=this._curtains._scrollManager.lastXDelta*this._curtains.pixelRatio,this._applyWorldPositions())},Curtains.Plane.prototype.enableDepthTest=function(t){this._depthTest=t},Curtains.Plane.prototype.moveToFront=function(){this.enableDepthTest(!1);for(var t=this._transparent?\"transparent\":\"opaque\",e=this._curtains._drawStacks[t].programs[\"program-\"+this._usedProgram.id],i=0;i<e.length;i++)this.index===e[i]&&e.splice(i,1);\"transparent\"===t?e.unshift(this.index):e.push(this.index),this._curtains._drawStacks[t].programs[\"program-\"+this._usedProgram.id]=e;for(i=0;i<this._curtains._drawStacks[t].order.length;i++)this._curtains._drawStacks[t].order[i]===this._usedProgram.id&&this._curtains._drawStacks[t].order.splice(i,1);this._curtains._drawStacks[t].order.push(this._usedProgram.id)},Curtains.Plane.prototype.onReEnterView=function(t){return t&&(this._onReEnterViewCallback=t),this},Curtains.Plane.prototype.onLeaveView=function(t){return t&&(this._onLeaveViewCallback=t),this},Curtains.RenderTarget=function(t,e){e||(e={}),this._curtains=t,this.index=this._curtains.renderTargets.length,this._type=\"RenderTarget\",this._shaderPass=e.shaderPass||null,this._depth=e.depth||!1,this._shouldClear=e.clear,null!==this._shouldClear&&void 0!==this._shouldClear||(this._shouldClear=!0),this._minSize={width:e.minWidth||1024*this._curtains.pixelRatio,height:e.minHeight||1024*this._curtains.pixelRatio},this.userData={},this.uuid=this._curtains._generateUUID(),this._curtains.renderTargets.push(this),this._initRenderTarget()},Curtains.RenderTarget.prototype._initRenderTarget=function(){this._setSize(),this.textures=[],this._createFrameBuffer()},Curtains.RenderTarget.prototype._setSize=function(){this._shaderPass&&this._shaderPass._isScenePass?this._size={width:this._curtains._boundingRect.width,height:this._curtains._boundingRect.height}:this._size={width:Math.max(this._minSize.width,this._curtains._boundingRect.width),height:Math.max(this._minSize.height,this._curtains._boundingRect.height)}},Curtains.RenderTarget.prototype.resize=function(){this._shaderPass&&this._shaderPass._isScenePass&&(this._setSize(),this._curtains._bindFrameBuffer(this,!0),this._depth&&this._bindDepthBuffer(),this._curtains._bindFrameBuffer(null))},Curtains.RenderTarget.prototype._bindDepthBuffer=function(){var t=this._curtains.gl;this._depthBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,this._depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this._size.width,this._size.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this._depthBuffer))},Curtains.RenderTarget.prototype._createFBOTexture=function(){var t=this._curtains.gl;if(this.textures.length>0)this.textures[0]._canDraw=!1,this.textures[0]._init();else{var e=new Curtains.Texture(this._shaderPass?this._shaderPass:this,{index:this.textures.length,sampler:\"uRenderTexture\",isFBOTexture:!0});this.textures.push(e)}t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.textures[0]._sampler.texture,0)},Curtains.RenderTarget.prototype._createFrameBuffer=function(){var t=this._curtains.gl;this._frameBuffer=t.createFramebuffer(),this._curtains._bindFrameBuffer(this,!0),this._createFBOTexture(),this._depth&&(this._depthBuffer=t.createRenderbuffer(),this._bindDepthBuffer()),this._curtains._bindFrameBuffer(null)},Curtains.RenderTarget.prototype._restoreContext=function(){this._shaderPass&&this._shaderPass._isScenePass||(this._shaderPass=null,this._createFrameBuffer())},Curtains.RenderTarget.prototype._dispose=function(){this._frameBuffer&&(this._curtains.gl.deleteFramebuffer(this._frameBuffer),this._frameBuffer=null),this._depthBuffer&&(this._curtains.gl.deleteRenderbuffer(this._depthBuffer),this._depthBuffer=null),this.textures[0]._dispose(),this.textures=[]},Curtains.ShaderPass=function(t,e){e||(e={}),e.widthSegments=1,e.heightSegments=1,this._type=\"ShaderPass\",this._isScenePass=!0,Curtains.BasePlane.call(this,t,t.container,e),this.index=this._curtains.shaderPasses.length,this._depth=e.depth||!1,this._shouldClear=e.clear,null!==this._shouldClear&&void 0!==this._shouldClear||(this._shouldClear=!0),this.target=e.renderTarget||null,this.target&&(this._isScenePass=!1,this._shouldClear=this.target._shouldClear),this._usedProgram&&this._initShaderPassPlane()},Curtains.ShaderPass.prototype=Object.create(Curtains.BasePlane.prototype),Curtains.ShaderPass.prototype.constructor=Curtains.ShaderPass,Curtains.ShaderPass.prototype._initShaderPassPlane=function(){if(this.target){this.setRenderTarget(this.target),this.target._shaderPass=this;var t=new Curtains.Texture(this,{index:this.textures.length,sampler:\"uRenderTexture\",isFBOTexture:!0,fromTexture:this.target.textures[0]});this.textures.push(t)}else this._createFrameBuffer();this._isPlaneReady(),this._canDraw=!0,this._curtains.needRender()},Curtains.ShaderPass.prototype._getDefaultVS=function(t){return\"precision mediump float;\\nattribute vec3 aVertexPosition;attribute vec2 aTextureCoord;varying vec3 vVertexPosition;varying vec2 vTextureCoord;void main() {vTextureCoord = aTextureCoord;vVertexPosition = aVertexPosition;gl_Position = vec4(aVertexPosition, 1.0);}\"},Curtains.ShaderPass.prototype._getDefaultFS=function(t){return\"precision mediump float;\\nvarying vec3 vVertexPosition;varying vec2 vTextureCoord;uniform sampler2D uRenderTexture;void main( void ) {gl_FragColor = texture2D(uRenderTexture, vTextureCoord);}\"},Curtains.ShaderPass.prototype._createFrameBuffer=function(){var t=new Curtains.RenderTarget(this._curtains,{shaderPass:this,clear:this._shouldClear,depth:this._depth});this.setRenderTarget(t),this.textures.push(this.target.textures[0])},Curtains.Texture=function(t,e){if(this._parent=t,this._curtains=t._curtains,this.uuid=this._curtains._generateUUID(),t._usedProgram||e.isFBOTexture)return this.index=t.textures.length,this._sampler={isActive:!1,name:e.sampler||\"uSampler\"+this.index},this._textureMatrix={name:e.sampler?e.sampler+\"Matrix\":\"uTextureMatrix\"+this.index,matrix:null},this._willUpdate=!1,this.shouldUpdate=!1,this._forceUpdate=!1,this.scale={x:1,y:1},this.userData={},this.type=e.isFBOTexture?\"fboTexture\":\"empty\",this._canDraw=!1,e.fromTexture?(this._initFromTexture=!0,this._parent._usedProgram&&this._setTextureUniforms(),void this.setFromTexture(e.fromTexture)):(this._initFromTexture=!1,this._init(),this);this._curtains.productionMode||console.warn(\"Unable to create the texture because the program is not valid\")},Curtains.Texture.prototype._init=function(){var t=this._curtains.gl;if(this._sampler.texture=t.createTexture(),this._internalFormat=t.RGBA,this._format=t.RGBA,this._textureType=t.UNSIGNED_BYTE,this._texParameters=!1,this._flipY=!1,t.bindTexture(t.TEXTURE_2D,this._sampler.texture),this._curtains._glState.flipY&&(this._curtains._glState.flipY=this._flipY,t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,this._flipY)),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this._parent._usedProgram){if(this._size={width:this._parent._boundingRect.document.width,height:this._parent._boundingRect.document.height},this._setTextureUniforms(),\"empty\"===this.type)t.texImage2D(t.TEXTURE_2D,0,this._internalFormat,1,1,0,this._format,this._textureType,new Uint8Array([0,0,0,255])),this._sourceLoaded=!1;else if(!this.source){var e=this._getSizes();this._updateTextureMatrix(e)}}else this._size={width:this._parent._size.width||this._curtains._boundingRect.width,height:this._parent._size.height||this._curtains._boundingRect.height};\"fboTexture\"===this.type&&(this._curtains._isWebGL2&&this._curtains._extensions.EXT_color_buffer_float?(this._internalFormat=t.RGBA16F,this._textureType=t.HALF_FLOAT):this._curtains._extensions.OES_texture_half_float&&(this._textureType=this._curtains._extensions.OES_texture_half_float.HALF_FLOAT_OES),t.texImage2D(t.TEXTURE_2D,0,this._internalFormat,this._size.width,this._size.height,0,this._format,this._textureType,null),this._setMipmaps()),this._canDraw=!0},Curtains.Texture.prototype._setTextureUniforms=function(){for(var t=0;t<this._parent._activeTextures.length;t++)this._parent._activeTextures[t].name===this._sampler.name&&(this._sampler.isActive=!0,this._sampler.location=this._curtains.gl.getUniformLocation(this._parent._usedProgram.program,this._sampler.name),this._textureMatrix.location=this._curtains.gl.getUniformLocation(this._parent._usedProgram.program,this._textureMatrix.name),this._curtains._useProgram(this._parent._usedProgram),this._curtains.gl.uniform1i(this._sampler.location,this.index))},Curtains.Texture.prototype.setFromTexture=function(t){if(t){if(this.type=t.type,this._sampler.texture=t._sampler.texture,this.source=t.source,this._size=t._size,this._sourceLoaded=t._sourceLoaded,this._internalFormat=t._internalFormat,this._format=t._format,this._textureType=t._textureType,this._texParameters=t._texParameters,this._originalTexture=t,this._parent._usedProgram&&(!this._canDraw||!this._textureMatrix.matrix)){var e=this._getSizes();this._updateTextureMatrix(e),this._canDraw=!0}}else this._curtains.productionMode||console.warn(\"Unable to set the texture from texture:\",t)},Curtains.Texture.prototype.setSource=function(t){if(this._parent._usedProgram){this.source=t,\"empty\"===this.type&&(\"IMG\"===t.tagName.toUpperCase()?this.type=\"image\":\"VIDEO\"===t.tagName.toUpperCase()?(this.type=\"video\",this.shouldUpdate=!0):\"CANVAS\"===t.tagName.toUpperCase()?(this.type=\"canvas\",this._willUpdate=!0,this.shouldUpdate=!0):this._curtains.productionMode||console.warn(\"this HTML tag could not be converted into a texture:\",t.tagName)),this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight},this._sourceLoaded=!0;var e=this._curtains.gl;e.activeTexture(e.TEXTURE0+this.index),e.bindTexture(e.TEXTURE_2D,this._sampler.texture),this._curtains.premultipliedAlpha&&e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),this._flipY=!0,this._curtains._glState.flipY||(this._curtains._glState.flipY=this._flipY,e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,this._flipY)),this.resize(),\"image\"===this.type&&(e.texImage2D(e.TEXTURE_2D,0,this._internalFormat,this._format,this._textureType,t),this._setMipmaps()),this._curtains.needRender()}else this._curtains.productionMode||console.warn(\"Unable to set the texture source because the program is not valid\")},Curtains.Texture.prototype._setMipmaps=function(){var t=this._curtains.gl;t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this._curtains._isWebGL2&&\"image\"===this.type?(t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this._texParameters=!0},Curtains.Texture.prototype.needUpdate=function(){this._forceUpdate=!0},Curtains.Texture.prototype._update=function(){var t=this._curtains.gl;this.source?(t.texImage2D(t.TEXTURE_2D,0,this._internalFormat,this._format,this._textureType,this.source),this._texParameters||this._setMipmaps()):t.texImage2D(t.TEXTURE_2D,0,this._internalFormat,this._size.width,this._size.height,0,this._format,this._textureType,this.source)},Curtains.Texture.prototype._getSizes=function(){var t=this._parent.scale?this._parent.scale:{x:1,y:1},e=this._parent._boundingRect.document.width*t.x,i=this._parent._boundingRect.document.height*t.y,s=this._size.width,r=this._size.height,a=s/r,n=e/i,o=0,h=0;return n>a?h=Math.min(0,i-e*(1/a)):n<a&&(o=Math.min(0,e-i*a)),{parentWidth:e,parentHeight:i,sourceWidth:s,sourceHeight:r,xOffset:o,yOffset:h}},Curtains.Texture.prototype.setScale=function(t,e){t=isNaN(t)?this.scale.x:parseFloat(t),e=isNaN(e)?this.scale.y:parseFloat(e),t=Math.max(t,.001),e=Math.max(e,.001),t===this.scale.x&&e===this.scale.y||(this.scale={x:t,y:e},this.resize())},Curtains.Texture.prototype.resize=function(){if(\"fboTexture\"===this.type){var t=this._curtains.gl;this._size={width:this._parent._boundingRect.document.width,height:this._parent._boundingRect.document.height},this._originalTexture||(t.bindTexture(t.TEXTURE_2D,this._parent.textures[0]._sampler.texture),t.texImage2D(t.TEXTURE_2D,0,this._internalFormat,this._size.width,this._size.height,0,this._format,this._textureType,this.source))}else this.source&&(this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight});if(this._parent._usedProgram){var e=this._getSizes();this._updateTextureMatrix(e)}},Curtains.Texture.prototype._updateTextureMatrix=function(t){var e={x:t.parentWidth/(t.parentWidth-t.xOffset),y:t.parentHeight/(t.parentHeight-t.yOffset)};e.x/=this.scale.x,e.y/=this.scale.y;var i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,(1-e.x)/2,(1-e.y)/2,0,1]);this._textureMatrix.matrix=this._curtains._scaleMatrix(i,e.x,e.y,1),this._curtains._useProgram(this._parent._usedProgram),this._curtains.gl.uniformMatrix4fv(this._textureMatrix.location,!1,this._textureMatrix.matrix)},Curtains.Texture.prototype._onSourceLoaded=function(t){this._parent._loadingManager.sourcesLoaded++;var e=this;if(this._sourceLoaded||setTimeout(function(){e._parent._onPlaneLoadingCallback&&e._parent._onPlaneLoadingCallback(e)},0),this.setSource(t),this._parent._isPlaneReady(),\"image\"===this.type){for(var i=!0,s=0;s<this._curtains._imageCache.length;s++)this._curtains._imageCache[s].source&&this._curtains._imageCache[s].source.src===t.src&&(i=!1);i&&this._curtains._imageCache.push(this)}},Curtains.Texture.prototype._onVideoLoadedData=function(t){this._sourceLoaded||this._onSourceLoaded(t)},Curtains.Texture.prototype._drawTexture=function(){this._sampler.isActive&&(this._parent._bindPlaneTexture(this),this._flipY&&!this._curtains._glState.flipY&&(this._curtains._glState.flipY=this._flipY,this._curtains.gl.pixelStorei(this._curtains.gl.UNPACK_FLIP_Y_WEBGL,this._flipY)),\"video\"===this.type&&this.source&&this.source.readyState>=this.source.HAVE_CURRENT_DATA&&(this._willUpdate=!0),(this._forceUpdate||this._willUpdate&&this.shouldUpdate)&&this._update(),\"video\"===this.type&&(this._willUpdate=!1),this._forceUpdate=!1)},Curtains.Texture.prototype._restoreFromTexture=function(){this._initFromTexture?this._setTextureUniforms():this._init(),this.setFromTexture(this._originalTexture)},Curtains.Texture.prototype._restoreContext=function(){if(this._canDraw=!1,this._sampler.isActive=!1,this._originalTexture){var t=this;if(this._originalTexture._canDraw)setTimeout(function(){t._restoreFromTexture()},0);else var e=setInterval(function(){t._originalTexture._canDraw&&(t._restoreFromTexture(),clearInterval(e))},16)}else this._init(),this.source&&(\"image\"===this.type&&this._curtains._imageCache.push(this),this.setSource(this.source),this.needUpdate())},Curtains.Texture.prototype._dispose=function(){\"video\"===this.type?(this.source.removeEventListener(\"canplaythrough\",this._onSourceLoadedHandler,!1),this.source.removeEventListener(\"error\",this._parent._sourceLoadError,!1),this.source.pause(),this.source.removeAttribute(\"src\"),this.source.load(),this.source=null):\"canvas\"===this.type?(this.source.width=this.source.width,this.source=null):\"image\"===this.type&&this._curtains._isDestroying&&(this.source.removeEventListener(\"load\",this._onSourceLoadedHandler,!1),this.source.removeEventListener(\"error\",this._parent._sourceLoadError,!1),this.source=null);var t=this._curtains.gl;t&&!this._originalTexture&&(\"image\"!==this.type||this._curtains._isDestroying)&&(t.activeTexture(t.TEXTURE0+this.index),t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(this._sampler.texture)),this._parent._loadingManager&&this._parent._loadingManager.sourcesLoaded--};module.exports={Curtains};"]},"metadata":{},"sourceType":"script"}